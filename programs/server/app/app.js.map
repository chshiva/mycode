{"version":3,"sources":["meteor://ðŸ’»app/lib/aldeed-table-config.js","meteor://ðŸ’»app/lib/collections.js","meteor://ðŸ’»app/lib/logconfig.js","meteor://ðŸ’»app/server/app/contacts/contacts.js","meteor://ðŸ’»app/server/app/messages/messages.js","meteor://ðŸ’»app/server/app/app.js","meteor://ðŸ’»app/server/app/guest.js","meteor://ðŸ’»app/server/SIP/asterisk.js","meteor://ðŸ’»app/server/applicationSettings/ldap-settings.js","meteor://ðŸ’»app/server/applicationSettings/my-account.js","meteor://ðŸ’»app/server/applicationSettings/room-settings.js","meteor://ðŸ’»app/server/applicationSettings/smtp-settings.js","meteor://ðŸ’»app/server/applicationSettings/user-management-settings.js","meteor://ðŸ’»app/server/applicationSettings/whiteLabel-settings.js","meteor://ðŸ’»app/server/collections/application-settings.js","meteor://ðŸ’»app/server/collections/corporate.js","meteor://ðŸ’»app/server/collections/logger.js","meteor://ðŸ’»app/server/collections/meeting-schedule.js","meteor://ðŸ’»app/server/collections/room-license.js","meteor://ðŸ’»app/server/conference/auto-db-mgr.js","meteor://ðŸ’»app/server/conference/conference-manager.js","meteor://ðŸ’»app/server/conference/logger-manage.js","meteor://ðŸ’»app/server/lab/testing.js","meteor://ðŸ’»app/server/manageall/manage-myaccount.js","meteor://ðŸ’»app/server/meetingSchedular/cron-job.js","meteor://ðŸ’»app/server/meetingSchedular/meeting-schedular.js","meteor://ðŸ’»app/server/permissions/permission.js","meteor://ðŸ’»app/server/permissions/publishers.js","meteor://ðŸ’»app/server/startup/acccounts-configuration.js","meteor://ðŸ’»app/server/startup/application-configuration.js","meteor://ðŸ’»app/server/startup/email-configuration.js","meteor://ðŸ’»app/server/startup/globals.js","meteor://ðŸ’»app/server/startup/seeds.js","meteor://ðŸ’»app/server/startup/uploads.js"],"names":[],"mappings":"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","file":"/app.js","sourcesContent":["\nRoomLicense = new Mongo.Collection('roomLicense');\nCorporate = new Mongo.Collection('corporate');\n\nTabularTables = {};\n\nMeteor.isClient && Template.registerHelper('TabularTables', TabularTables);\n\nTabularTables.Users = new Tabular.Table({\n\tname : \"Users\",\n\tcollection : Meteor.users,\n\tcolumns : [\n\t\t{data : \"profile.name\", title : \"InstaVC Name\"},\n\t\t{data : \"username\", title : \"Email\"},\n\t\t{data : \"displayName\", title : \"LDAP&nbsp;Name\"},\n\t\t/*{data : \"emails[0].address\", title : \"Email\"},*/\n\t\t{data : \"role\", title : \"Role\"}, //role helper needs to be looked into\n\t\t{tmpl : Meteor.isClient && Template.viewUserBtnA, title : \"View\" },\n\t],\n\tautowidth: true,\n\tpageLength: 6\n\t//,\n\t// columns: [null,null,null,null]\n});\n\nTabularTables.Rooms = new Tabular.Table({\n\tname: \"Rooms\",\n\tcollection : RoomLicense,\n\tallow: function(userId){\n\t\t//return RoomLicense.findOne({roomLicense: sdlfjlsj});\n\t\treturn true;\n\t},\n\tcolumns: [\n\t\t{data: \"roomLicense\", title: \"License Key\"},\n\t\t{data: \"roomName\", title: \"Room Name\"},\n\t\t{tmpl: Meteor.isClient && Template.viewRoomBtn, title: \"View\"},\n\t],\n\tautowidth: true,\n\tpageLength: 6\n});\n\nTabularTables.Corporate = new Tabular.Table({\n\tname: \"Corporate List\",\n\tcollection : Corporate,\n\tallow: function(userId){\n\t\t//return RoomLicense.findOne({roomLicense: sdlfjlsj});\n\t\treturn true;\n\t},\n\tcolumns: [\n\t\t{data: \"businessName\", title: \"Business Name\"},\n\t\t{data: \"contactPerson\", title: \"Contact Person\"},\n\t\t{data: \"contactEmail\", title: \"Email\"},\n\t\t{tmpl: Meteor.isClient && Template.viewCorporateBtn, title: \"View\"},\n\t],\n\tautowidth: true,\n\tpageLength: 6\n});\n","ApplicationSettings = new Mongo.Collection('applicationSettings');\n\nMeetings = new Mongo.Collection(\"meetings\");\n\nMessages = new Mongo.Collection('messages');\n\nChatRoom = new Mongo.Collection('chat_room');\n\nLogger \t= new Mongo.Collection('inv_logger');\n\n\n// Meteor.users.search = function (query) {\n// \treturn Meteor.users.find({\n// \t\t\"email.address\" : { $regex: RegExp.escape(query), $options: \"i\"}\n// \t},{\n// \t\tlimit: 20\n// \t});\n// };","import {Logger} from 'meteor/ostrio:logger';\n\nthis.log = new Logger();\n\nAppLogs = new Mongo.Collection('AppLogs');\n\nLogMongo = new LoggerMongo(log, {\n  collection: AppLogs /* Use custom collection name */\n}).enable();\n\nif (Meteor.isServer) {\n  LogMongo.collection._ensureIndex({level: 1}, {background: true});\n  LogMongo.collection._ensureIndex({userId: 1}, {background: true});\n  LogMongo.collection._ensureIndex({date: 1}, {background: true});\n  LogMongo.collection._ensureIndex({timestamp: 1}, {background: true});\n}\n\n\nTabularTables.LogMongo = new Tabular.Table({\n\tname : \"LogMongo\",\n\tcollection : AppLogs,\n\tcolumns : [\n\t\t{data : \"message\", title : \"Message\"},\n\t\t{data : \"date\", title : \"Date/Time\"},\n\t\t{data : \"level\", title : \"Level\"},\n\t\t{data : \"userId\", title : \"userId\"},\n\t\t{data : \"additional\", title : \"Additional\"},\n\t\t/*{tmpl : Meteor.isClient && Template.viewUserBtnA, title : \"View\" },*/\n\t],\n\tautowidth: true,\n\tpageLength: 10\n\t//,\n\t// columns: [null,null,null,null]\n});\n","Meteor.methods({\n\t// This method accepts the userEmail as a parameter\n\t// and the returns the profile name if any user exists in the database wth that email.\n\tgetUsersBasedOnSearch: function (userEmail) {\n\t\tif (this.userId) {\n\t\t\ttry {\n\t\t\t\tvar user = Accounts.findUserByEmail(userEmail);\n\t\t\t\tvar profileName = user.profile.name ;\n\t\t\t\tvar userObj = { profile: {name: profileName},\n\t\t\t\t\t\t\t\t\t\t\t\temail: user['emails'][0]['address'],\n\t\t\t\t\t\t\t\t\t\t\t\tusername: user.username,\n\t\t\t\t\t\t\t\t\t\t\t\t_id: user._id\n\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\treturn {result: userObj, error: 0};\n\t\t\t} catch (e) {\n\t\t\t\treturn {result: 0, error: \"No user existing with that email.\"};\n\t\t\t}\n\t\t}\n\t},\n\t// this method accepts contactUserId as a parameter\n\t// checks whether the contact is already existing in the user contacts list.\n\t// if existing it will return the proper message ifnot it will add the user to the contacts list.\n\t// it will also add the contacts to the requested user. \n\taddUserToContact: function (contactUserId) {\n\t\tthis.unblock();\n\t\tif (contactUserId == \"\") return {result: 0, error: \"UserEmail Required.\"};\n\t\tif (this.userId) {\n\t\t\tvar contacts = Meteor.users.findOne(this.userId).contacts;\n\t\t\tvar contactObj = {uid: contactUserId, accepted: false};\n\n\t\t\tif (contacts) {\n\t\t\t\tvar contactAlreadyExisting = Meteor.users.findOne({ _id: this.userId, contacts: { $elemMatch: { uid: contactUserId } } });\n\t\t\t\t// console.log(contactAlreadyExisting);\n\t\t\t\tif (contactAlreadyExisting) {\n\t\t\t\t\treturn { result: 0, error: \"User is already existing in your conatcts.\"};\n\t\t\t\t} else {\n\t\t\t\t\tMeteor.users.update({_id: this.userId}, {$push: {contacts: contactObj}});\t\t\t\t\t\t\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tMeteor.users.update({_id: this.userId}, {$set: {contacts: [contactObj]}});\n\t\t\t}\n\n\t\t\t// Add contact to the other end user\n\t\t\tvar contactsOfReqestedUser = Meteor.users.findOne(contactUserId).contacts;\n\t\t\tvar contactObjOfReqestedUser = {uid: this.userId, confirmed: false};\n\t\t\t// Add contact to the requested user\n\t\t\tif (contactsOfReqestedUser) {\n\t\t\t\tMeteor.users.update({_id: contactUserId}, {$push: {contacts: contactObjOfReqestedUser}})\n\t\t\t} else {\n\t\t\t\tvar  result = Meteor.users.update({_id: contactUserId}, {$set: {contacts: [contactObjOfReqestedUser]}});\n\t\t\t}\n\t\t\treturn { result: \"Contact successfully added\", error: 0};\n\t\t} else {\n\t\t\treturn \"Your not allowed to call this method.\";\n\t\t}\n\t},\n\t// this method confirmes the user as a contat.\n\t// updates the contact obj in both the users contacts.\n\t// it will create a chatRoom and addes it to the contacts object.\n\t// this will also create the messages document for instant chatting after confim the contact.\n\tconfirmContactRequest: function (contactUserId) {\n\t\ttry {\n\t\t\tif (this.userId) {\n\t\t\t\tvar chatRoomId = ChatRoom.insert({\n\t\t\t\t\tusers: [this.userId, contactUserId],\n\t\t\t\t\tnoOfUsers: 2\n\t\t\t\t});\n\n\t\t\t\tMeteor.users.update({_id: this.userId, 'contacts.uid': contactUserId}, {$set: {'contacts.$.confirmed': true, 'contacts.$.chatRoom': chatRoomId}});\n\t\t\t\tMeteor.users.update({_id: contactUserId, 'contacts.uid': this.userId}, {$set: {'contacts.$.accepted': true, 'contacts.$.chatRoom': chatRoomId}});\n\n\t\t\t\t// Messages.insert({chatRoomId: chatRoomId, chatDate: UTCDateNumber, messages: [], dateForUI: new Date()});\n\n\t\t\t\treturn {result: {chatRoomId: chatRoomId}, error: 0};\n\t\t\t} else {\n\t\t\t\treturn {result: 0, error: \"You are not allowed to do this operation.\"};\n\t\t\t}\t\t\t\n\t\t} catch (e) {\n\t\t\tconsole.log(e);\n\t\t\treturn new Meteor.Error(\"Custom-Error\", \"Something went wrong. Please try after sometime.\")\n\t\t\t// return {result: 0, error: \"Something went wrong.\"}; \n\t\t}\n\t},\n\tlastVisitToContact: function (chatRoomId, UTCDateNumber, dateTime) {\n\t\ttry {\n\t\t\tif (this.userId) {\n\t\t\t\tvar result = Meteor.users.update({_id: this.userId, \"contacts.chatRoom\": chatRoomId}, {$set: {'contacts.$.lastVisitDateTime': dateTime, 'contacts.$.lastVisitUTCDate': UTCDateNumber}});\n\t\t\t\treturn result;\n\t\t\t} else {\n\t\t\t\treturn new Meteor.Error(\"Not Allowed\", \"You are not allowed to this operation.\");\n\t\t\t}\t\t\t\n\t\t} catch (e) {\n\t\t\tconsole.log(\"error is \",e);\n\t\t\treturn new Meteor.Error(\"Type-Error\", \"Something went wrong.\")\n\t\t}\n\t}\n});\n\nMeteor.methods({\n\tcreateMessageDoc: function (chatRoomId, UTCDateNumber) {\n\t\tif (! this.userId) {\n\t\t\treturn new Meteor.Error(\"not-logged-out\", \n  \t\t\"You are not logged in to do this operation\");\n\t\t}\n\n\t\ttry {\n\t\t\tconsole.log(\" createMessageDoc \");\n\t\t\tvar chatForTheDay = Messages.findOne({chatRoomId: chatRoomId, chatDate: UTCDateNumber});\n\n\t\t\tif (! chatForTheDay) {\n\t\t\t\tconsole.log(\"chatForTheDay is not existing. Creating a new chatForTheDay\");\n\t\t\t\tMessages.insert({chatRoomId: chatRoomId, chatDate: UTCDateNumber, messages: [], dateForUI: new Date()});\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\t\t\t\n\t\t} catch (e) {\n\t\t\tconsole.log(\" error in createMessageDoc is \", e);\n\t\t\treturn new Meteor.Error(\"Type-Error\", \"We are sorry something went wrong, we can't send the messages now. Please try later.\");\n\t\t}\n\t}\n});","Meteor.methods({\n\t/* CR-IVC5-0001844 function for sending meesage to iOS clients DSS>> */\n\tsendMessageiOS: function (chatRoomId, UTCDateNumber, messageId, messageObj) {\n        if (! this.userId) return;\n        console.log(\"chatRoomId \",chatRoomId);\n        console.log(\"UTCDateNumber \",UTCDateNumber);\n        console.log(\"messageId \",messageId);\n        console.log(\"messageObj \",messageObj);\n        messageObj.sentAt = new Date();\n        console.log(messageObj);\n        try {\n            if (messageId) {\n                Messages.update({_id: messageId}, {$push: {messages: messageObj}});\n                return true;\n            } else {\n                Messages.insert({chatRoomId: chatRoomId, chatDate: UTCDateNumber, dateForUI: new Date(), messages: [messageObj]});\n                return true;\n            }\n        } catch (e) {\n            return new Meteor.Error(\"Something Went Wrong\");\n        }\n    },\n    /* CR-IVC5-0001844 - DSS<< */\n\n\t//updates the messages collections for each message transmission\n\tsendMessage: function (chatRoomId, UTCDateNumber, messageId, messageObj) {\n\t\tif (! this.userId) return;\n\t\tconsole.log(\"chatRoomId \",chatRoomId);\n\t\tconsole.log(\"UTCDateNumber \",UTCDateNumber);\n\t\tconsole.log(\"messageId \",messageId);\n\t\tconsole.log(\"messageObj \",messageObj);\n\t\ttry {\n\t\t\tif (messageId) {\n\t\t\t\tMessages.update({_id: messageId}, {$push: {messages: messageObj}});\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\tMessages.insert({chatRoomId: chatRoomId, chatDate: UTCDateNumber, dateForUI: new Date(), messages: [messageObj]});\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\treturn new Meteor.Error(\"Something Went Wrong\");\n\t\t}\n\n\t\t// try {\n\t\t\t\t// if (Messages.findOne({chatRoomId: chatRoomId, chatDate: UTCDateNumber})) {\n\t\t\t\t\t// Messages.update({_id: messageId}, {$push: {messages: messageObj}});\n\t\t\t\t// } else {  , chatDate: UTCDateNumber\n\t\t\t\t\t// Messages.insert({chatRoomId: chatRoomId, chatDate: UTCDateNumber, dateForUI: new Date()});\n\t\t\t\t// }\n\t\t\t\t// return true;\n\n\t\t// } catch (e) {\n\t\t\t// var messages = Meteor.findOne({_id: messageId}, {$push: {messages: messageObj}});\n\t\t\t// if (messages) {\n\t\t\t// \tconsole.log(\"error is \", e);\n\t\t\t// \tthrow new Meteor.Error(\"TypeError\",\"Something went wrong, We can't send the message now.\");\t\t\t\t\n\t\t\t// } else {\n\t\t\t// \t// Messages.insert({chatRoomId: chatRoomId, chatDate: UTCDateNumber, dateForUI: new Date(), messages: [messageObj]});\n\t\t\t// \treturn true;\n\t\t\t// }\n\t\t// }\n\t}\n});\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// Messages = new Mongo.Collection('messages');\n\n// ChatRooms = new Mongo.Collection('chat_rooms');\n\n\n// Meteor.methods({\n// \tcreateChatRoom: function (users){\n// \t\treturn ChatRooms.insert({ users: [\"MatN46BoXJSc2tGmp\", \"B9XRutCMQ7MDF4NZq\"] })\t\t\n// \t\t// ChatRooms.insert({ users: users})\n// \t},\n// \tcreateMessage: function (chatRoomId) {\n// \t\treturn Messages.insert({chatRoomId: \"PaEXBnCCrMNRfZBrp\", messages: []});\n// \t},\n// \tinsertMessage: function ( messageObj, messageCollectionId) {\n// \t\ttry {\n// \t\t\t\tfor (var i=131346; i<200000; i++) {\n// \t\t\t\t\tvar messageObj = {\n// \t\t\t\t\t\tmessage: \"Hello..\"+i,\n// \t\t\t\t\t\ttype: \"string\",\n// \t\t\t\t\t\ttime: new Date(\"2016-02-27\"), //\"2016-03-02\"\n// \t\t\t\t\t\tsentBy: \"MatN46BoXJSc2tGmp\"\n// \t\t\t\t\t};\n// \t\t\t\t\tconsole.log(i);\n// \t\t\t\t\tMessages.update({_id: \"GtTwSw9YfEARrRN32\"}, {$push: {messages: messageObj} });\n// \t\t\t\t}\t\t\t\n// \t\t\t} catch (e) { console.log(e); }\n// \t},\n// \tgetMessages: function (date) {\n// \t\tconsole.log(Messages.aggregate({$match: {_id: \"GtTwSw9YfEARrRN32\"} } ))\n// \t}\n// });\n\n\n// // db.messages.aggregate([{$match:{_id: \"GtTwSw9YfEARrRN32\"}},{$unwind:\"$messages\"},{$match:{\"messages.time\":{\"$gt\":new Date(\"2016-03-01\")}}},{$group:{_id:\"$_id\", \"messages\":{$push:\"$messages\"}}}]).pretty()\n\n\n\n// // db.messages.find({_id: \"GtTwSw9YfEARrRN32\",messages: {$elemMatch: {\"time\": {$gt: new Date(\"2016-03-01\")}}}})\n\n\n\n\n// // 2016-02-27\n// // 2016-02-28\n// // 2016-03-02","Meteor.methods({\n\tgetContactImage: function (uid) {\n\t\tthis.unblock();\n\t\ttry {\n\t\t\tif (! this.userId) return {result: 0, error: 'You are not authorized to call this method'};\n\t\t\telse return Meteor.users.findOne(uid).profile.profileImage;\n\t\t} catch (e) {}\n\t}\n});","Meteor.methods({\n\tsendInvitationToJoinCall: function (email, roomLicense) {\n\t\tif (this.userId && (Meteor.users.findOne(this.userId).role != \"GU\")) {\n\n\t\t\tvar roomDocument = RoomLicense.findOne({roomLicense: roomLicense});\n\t\t\tvar roomId = roomDocument._id;\n\t\t\tconsole.log(\"roomDocument.guestLoginToken \", roomDocument.guestLoginToken);\n\n\t\t\tif (roomDocument.guestLoginToken == undefined) {\n\t\t\t\tvar token = Random.id(10)+roomId+Random.id(50);\n\t\t\t\tRoomLicense.update({_id: roomId}, {$set: {guestLoginToken: token}});\t\t\t\t\n\t\t\t};\n\n\t\t\tvar hostName = Meteor.users.findOne(this.userId).profile.name;\n\t\t\tvar hostEmail = Meteor.users.findOne(this.userId).emails[0]['address'];\n\t\t\tvar link = Meteor.absoluteUrl()+\"guest?token=\"+RoomLicense.findOne(roomId).guestLoginToken;\n\n\t\t\tvar from = Meteor.users.findOne(this.userId).emails[0].address;\n\t\t\tconsole.log(\"MAIL_URL \", process.env.MAIL_URL)\n\t\t\tEmail.send({\n\t\t\t  to: email,\n\t\t\t  from: \"InstaVC Admin<no-reply@instavc.com>\",\n\t\t\t  subject: \"Invitation from InstaVC\",\n\t\t\t  html: \"<html><p>You are invited to a video call by \"+ hostName + \"(\"+ hostEmail +\")</p>\"+\n\t\t\t  \t\"Click on the link to join in the conference  <a href='\"+ link + \n\t\t\t  \t\"'+>\"+link+\"</a></html>\"\n\t\t\t});\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn new Meteor.Error(\"Permission-Error\", \"You are not allowed to send invitation mails\")\n\t\t}\n\t},\n\tverifyGuestLogin: function (token) {\n\t\ttry {\n\t\t\tvar roomId = token.substring(10,27);\n\t\t\tconsole.log(roomId);\n\t\t\tvar room = RoomLicense.findOne(roomId);\n\t\t\tconsole.log(room);\n\t\t\tif (room.guestLoginToken) {\n\t\t\t\tif (room.guestLoginToken == token) return {result: room.roomLicense, error: 0};\n\t\t\t\telse return {result: 0, error: \"Your session has expired.\"};\n\t\t\t} else {\n\t\t\t\treturn {result: 0, error: \"Your session has expired.\"};\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.log(e);\n\t\t\treturn new Meteor.Error(\"Type-Error\", \"Something went wrong. Please try after sometime.\");\n\t\t}\n\t},\n\tremoveGuestLoginToken: function (roomLicense) {\n\t\ttry {\n\t\t\tconsole.log(\"roomLicense \", roomLicense);\n\t\t\treturn RoomLicense.update({roomLicense: roomLicense}, {$unset: {guestLoginToken: \"\"}});\t\t\t\n\t\t} catch (e) {\n\t\t\tconsole.log(\"error in removeGuestLoginToken function\");\n\t\t\tconsole.log(\"e \",e);\t\t\t\n\t\t\treturn new Meteor.Error(\"Server Error\", \"Something went wrong. Please try after sometime\")\n\t\t}\n\n\t}\n});","var mySql = Npm.require('mysql');\n\nMeteor.startup(function () {\n\tFuture = Npm.require('fibers/future');\n\tmySQLConnectionSIP = mySql.createPool({\n\t\thost\t: '203.196.151.162', //213.133.101.109;\n\t\t/*connectionTimeout: 20000,*/\n\t\tport \t: '3306',\n\t\tuser \t: 'root',\n\t\tpassword : 'PeopleLink#@!',\n\t\tdatabase : 'kamailio',\n\t\tconnectionPooling: false\n\t\t// multipleStatements: true\n\t});\n\n\tmySQLConnectionH323 = mySql.createPool({\n\t\thost\t: 'h323.instavc.com', //213.133.101.109;\n\t\tport \t: '3306',\n\t\tuser \t: 'root',\n\t\tpassword : 'PeopleLink#@!',\n\t\tdatabase : 'instah323'\n\t\t// multipleStatements: true\n\t});\n\n\tmySQLConnectionTele = mySql.createPool({\n\t\thost\t: 'indtele.instavc.com',\n\t\tport \t: '3306',\n\t\tuser \t: 'InstaVC',\n\t\tpassword : 'PPL_$rinivas',\n\t\tdatabase : 'teleInstaVC'\n\t\t// password : 'PPL_!nstaVC',\n\t\t// database : 'teleInstaVC',\n\t\t// multipleStatements: true\n\t});\t\n});\n\nInsertBridgeNoToKamailio = function(bridgeNo, roomId, callback){\n\t\tvar url = 'http://indsip.instavc.com/makesipusers/createusers.php';\n\t\tvar body = {bridge: bridgeNo, password: \"ajarsun\"};\n\t\t// HTTP.call('POST', url, {data: body, rejectUnauthorized:false}, function(err, res){\n\t\t// \tconsole.log(err, res);\n\t\t// \tcallback(null, res);\n\t\t// });\n\t\tHTTP.post('http://indsip.instavc.com/makesipusers/createusers.php', {params: {bridge: bridgeNo, password:\"ajarsun\"}}, function(err, result){\n\t\t\tconsole.log(err, result);\n\t\t\tcallback(null, result);\n\t\t});\n}\n\nInsertBridgeNoIntoSIP = function (bridgeNo, callback) {\n\ttry {\n\t\tvar searchQuery = 'Select * from subscriber where username = \"' + bridgeNo + '\"';\t\n\t\tmySQLConnectionSIP.getConnection( function (err, connection) {\n\t\t\tif (connection) {\n\t\t\t\tconnection.query(searchQuery, function (err, rows, fields){\n\t\t\t\t\tif(rows[0] === undefined ){\t\t\n\t\t    \t\t\tconnection.query('INSERT INTO subscriber (username, domain, password) VALUES ( ?, ?, ? )', [bridgeNo, '127.0.0.1', 'ajarsun'], function (err, rows) {\n\t\t\t\t\t\t\t\tconnection.release();\n\t\t\t\t\t\t\t\tcallback(null, true);\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconnection.release();\n\t\t\t\t\t\tcallback(null, true);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else{\n\t\t\t\tconsole.log(\"Connection Error on indsip.instavc.com \", err);\n\t\t\t\tcallback(true, null); \n\t\t\t}\n\t\t});\t\t\n\t} catch (e) {\n\t\tconsole.log(e);\n\t\tcallback(true, null);\n\t}\n};\n\nInsertBridgeNoIntoH323 = function (bridgeNo, callback) {\n\ttry {\n\t\tvar searchQuery = 'Select * from h323users where user = \"' + bridgeNo + '\"';\t\n\t\tmySQLConnectionH323.getConnection( function (err, connection){\n\t\t\tif (connection) {\n\t\t\t\tconnection.query(searchQuery, function (err, rows, fields){\n\t\t\t\t\tif(rows[0] === undefined ){\t\t\n\t\t    \t\t\tconnection.query('INSERT INTO h323users (user) VALUES ( ?)', [bridgeNo], function (err, rows) {\n\t\t\t\t\t\t\t\tconnection.release();\n\t\t\t\t\t\t\t\tcallback(null, true);\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconnection.release();\n\t\t\t\t\t\tcallback(null, true);\n\t\t\t\t\t}\n\t\t\t\t});\t\t\t\t\n\t\t\t} else {\n\t\t\t\tconsole.log(\"Connection Error on h323.instavc.com \", err);\n\t\t\t\tcallback(true, null);\n\t\t\t}\n\t\t});\n\t} catch (e) {\n\t\tconsole.log(e);\n\t\tcallback(true, null);\n\t}\n};\n\nInsertBridgeNoIntoTele = function (bridgeNo, callback) { // right now we are not using this function.\n\ttry {\n\t\tvar searchQuery = 'Select * from confBridges where bridgeID = \"' + bridgeNo + '\"';\n\t\tmySQLConnectionTele.getConnection( function (err, connection) {\n\t\t\tconsole.log(\"ERRO\", err);\n\t\t\tif (connection) {\n\t\t\t\tconnection.query(searchQuery, function (err, rows, fields) {\n\t\t\t\t\t// console.log(\"ERRO 1\", err);\n\t\t\t\t\tif (rows[0] === undefined ) {\n\t\t    \t\t\tconnection.query('INSERT INTO confBridges (bridgeID) VALUES ( ? )', [bridgeNo], function(err, rows){\n\t\t\t\t\t\t\t\tconnection.release();\n\t\t\t\t\t\t\t\tcallback(null, true);\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconnection.release();\n\t\t\t\t\t\tcallback(null, true);\n\t\t\t\t\t}\n\t\t\t\t});\t\t\n\t\t\t} else {\n\t\t\t\tconsole.log(\"Connection Error on indtele.instavc.com \", err);\t\t\t\t\n\t\t\t\tcallback(true, null);\n\t\t\t}\n\t\t});\n\t} catch (e) {\n\t\tconsole.log(e);\n\t\tcallback(true, null);\n\t}\n};\n\nDeleteBridgeNoFromSIP = function (bridgeNo, callback) {\n\ttry {\n\t\tmySQLConnectionSIP.getConnection(function(err, connection) {\n\t\t\tif (connection) {\n\t\t\t\tconnection.query('DELETE from extensions Where exten = ?',[bridgeNo], function(err, rows){\n\t\t\t\t\tif (rows[0] === undefined) {\n\t\t\t\t\t\t\tconnection.release();\n\t\t\t\t\t\t\tcallback(null, true);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconnection.release();\n\t\t\t\t\t\tcallback(null, true);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconsole.log(\"Connection Error on indsip.instavc.com \", err);\n\t\t\t\tcallback(true, null);\n\t\t\t}\n\t\t});\n\t} catch (e) {\n\t\tcallback(true, null);\n\t}\n};\n\nDeleteBridgeNoFromH323 = function (bridgeNo, callback) {\n\ttry {\n\t\tmySQLConnectionH323.getConnection(function(err, connection) {\n\t\t\tif (connection) {\n\t\t\t\tconnection.query('DELETE from h323users Where user = ?',[bridgeNo], function(err, rows){\n\t\t\t\t\tif (rows[0] === undefined) {\n\t\t\t\t\t\t\tconnection.release();\n\t\t\t\t\t\t\tcallback(null, true);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconnection.release();\n\t\t\t\t\t\tcallback(null, true);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconsole.log(\"Connection Error on h323.instavc.com \", err);\n\t\t\t\tcallback(true, null);\t\t\t\t\n\t\t\t}\n\t\t});\n\t} catch (e) {\n\t\tcallback(true, null);\n\t}\n};\n\nDeleteBridgeNoFromTele = function (bridgeNo, callback) {\n\ttry {\n\t\tmySQLConnectionTele.getConnection(function(err, connection) {\n\t\t\tif (connection) {\n\t\t\t\tconnection.query('DELETE from confBridges Where bridgeID = ?',[bridgeNo], function(err, rows){\n\t\t\t\t\tif (rows[0] === undefined) {\n\t\t\t\t\t\t\tconnection.release();\n\t\t\t\t\t\t\tcallback(null, true);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconnection.release();\n\t\t\t\t\t\tcallback(null, true);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconsole.log(\"Connection Error on indtele.instavc.com \", err);\t\t\t\t\n\t\t\t\tcallback(true, null)\n\t\t\t}\n\t\t});\t\t\n\t} catch (e) {\n\t\tcallback(true, null);\n\t}\n};\n\nMeteor.methods({\n\tpullin: function(bridgeNo, toaddr){\n\t\tHTTP.post('http://pullin.instavc.com/pullin/pullin.php', {params: {bridge: bridgeNo, pullinuri:toaddr}}, function(err, result){\n\t\t\tconsole.log(err, result);\n\t\t\t// callback(null, result);\n\t\t});\n\t},\n\tupdateNuve: function(roomId, bridgeNumber){\n\t\tvar url = 'https://gpumcu.instavc.com/updateSip/';\n\t\tvar body = {roomid: roomId, uname: bridgeNumber};\n\t\tconsole.log(body);\n\t\tHTTP.call('POST', url, {data: body, rejectUnauthorized:false}, function(err, res){\n\t\t\tconsole.log(err, res);\n\t\t\t// callback(null, res.content);\n\t\t\t// callback(null, result);\n\t\t});\n\t},\n\tdeleteSIPNuve: function(roomId){\n\t\tvar url = 'https://gpumcu.instavc.com/disableSip/';\n\t\tvar body = {roomid: roomId};\n\t\t// console.log(body);\n\t\tHTTP.call('POST', url, {data: body, rejectUnauthorized:false}, function(err, res){\n\t\t\tconsole.log(err, res);\n\t\t\t// callback(null, res.content);\n\t\t\t// callback(null, result);\n\t\t});\t\n\t},\n\tinsertBridgeNo: function (bridgeNumber, roomId, callback) {\n\t\tvar myFuture = new Future();\n\t\ttry {\n\t\t\tvar insertBridgeNoIntoSIP = Meteor.wrapAsync(InsertBridgeNoToKamailio);\n\n\t\t\t// var insertBridgeNoIntoSIP = Meteor.wrapAsync(InsertBridgeNoIntoSIP);\n\t\t\t// var insertBridgeNoIntoH323 = Meteor.wrapAsync(InsertBridgeNoIntoH323);\n\t\t\t// var insertBridgeNoIntoTele = Meteor.wrapAsync(InsertBridgeNoIntoTele);\n\t\t\tinsertBridgeNoIntoSIP(bridgeNumber, roomId, function (err, res) {\n\t\t\t\tif (err) myFuture.throw(new Meteor.Error(\"MySql Server-Error\", \"We are sorry Please try after sometime\"));\n\t\t\t\telse {\n\t\t\t\t\t// console.log(roomId, bridgeNumber);\n\n\t\t\t\t\tvar tst = RoomLicense.update({_id: roomId}, {$set: {bridgeNumber: bridgeNumber}});\n\t\t\t\t\t// console.log(\"Room KLuc Updated\", tst);\t\t\t\t\n\t\t\t\t\tmyFuture.return(true);\t\n\t\t\t\t\t// /updateSip/\n\n\t\t\t\t\t\n\n\t\t\t\t\t// insertBridgeNoIntoH323(bridgeNumber, function (err, res) {\t\t\t\t\n\t\t\t\t\t// \tif (err) myFuture.throw(new Meteor.Error(\"MySql Server-Error\",\"We are sorry Please try after sometime\"));\n\t\t\t\t\t// \telse {\n\t\t\t\t\t// \t\tHTTP.call('GET', \"http://h323.instavc.com/makeh323users/createusers.php\", function(err, res){\n\t\t\t\t\t// \t\t\tif (err) if (err) myFuture.throw(new Meteor.Error(\"MySql Server-Error\", \"We are sorry Please try after sometime\"));\n\t\t\t\t\t// \t\t\telse console.log(\"No Error\");\n\t\t\t\t\t// \t\t});\n\t\t\t\t\t// \t\tinsertBridgeNoIntoTele(bridgeNumber, function (err, res) {\n\t\t\t\t\t// \t\t\tif (err) myFuture.throw(new Meteor.Error(\"MySql Server-Error\",\"We are sorry Please try after sometime\"));\n\t\t\t\t\t// \t\t\telse {\n\t\t\t\t\t// \t\t\t\tRoomLicense.update({_id: roomId}, {$set: {bridgeNumber: bridgeNumber}});\n\t\t\t\t\t// \t\t\t\tmyFuture.return(true);\n\t\t\t\t\t// \t\t\t}\n\t\t\t\t\t// \t\t});\t\t\t\t\t\t\t\n\t\t\t\t\t// \t}\n\t\t\t\t\t// });\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\tinsertBridgeNoIntoH323(bridgeNumber, function (err, res) {\t\t\t\t\n\t\t\t\t\t\tif (err) myFuture.throw(new Meteor.Error(\"MySql Server-Error\",\"We are sorry Please try after sometime\"));\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tHTTP.call('GET', \"http://h323.instavc.com/makeh323users/createusers.php\", function(err, res){\n\t\t\t\t\t\t\t\tif (err) if (err) myFuture.throw(new Meteor.Error(\"MySql Server-Error\", \"We are sorry Please try after sometime\"));\n\t\t\t\t\t\t\t\telse console.log(\"No Error\");\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tinsertBridgeNoIntoTele(bridgeNumber, function (err, res) {\n\t\t\t\t\t\t\t\tif (err) myFuture.throw(new Meteor.Error(\"MySql Server-Error\",\"We are sorry Please try after sometime\"));\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tRoomLicense.update({_id: roomId}, {$set: {bridgeNumber: bridgeNumber}});\n\t\t\t\t\t\t\t\t\tmyFuture.return(true);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t});\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t}\n\t\t\t});\n\t\t} catch (e) {\n\t\t\tconsole.log(\" insertBridgeNo error catched, the error is \",e);\n\t\t\tmyFuture.throw(new Meteor.Error(\"MySql Server-Error\", \"We are sorry Please try after sometime\"));\t\t\t\n\t\t}\n\t\treturn myFuture.wait();\n\t},\n\tupdateBridgeNo: function (oldBridgeNumber, newBridgeNumber, roomId) {\n\t\tvar myFuture = new Future();\t\t\n\t\ttry {\n\t\t\tvar deleteBridgeNoFromSIP = Meteor.wrapAsync(DeleteBridgeNoFromSIP);\n\t\t\tvar deleteBridgeNoFromH323 = Meteor.wrapAsync(DeleteBridgeNoFromH323);\n\t\t\tvar deleteBridgeNoFromTele = Meteor.wrapAsync(DeleteBridgeNoFromTele);\n\n\t\t\tvar insertBridgeNoIntoSIP = Meteor.wrapAsync(InsertBridgeNoIntoSIP);\n\t\t\tvar insertBridgeNoIntoH323 = Meteor.wrapAsync(InsertBridgeNoIntoH323);\n\t\t\tvar insertBridgeNoIntoTele = Meteor.wrapAsync(InsertBridgeNoIntoTele);\t\t\t\t\t\t\n\n\t\t\tdeleteBridgeNoFromSIP(oldBridgeNumber, function (err, res) {\n\t\t\t\tif (err) myFuture.throw(new Meteor.Error('MySql Server-Error', 'We are sorry, Your request is not updated successfully'));\n\t\t\t\telse {\n\t\t\t\t\tdeleteBridgeNoFromH323(oldBridgeNumber, function (err, res) {\n\t\t\t\t\t\tif (err) myFuture.throw(new Meteor.Error('MySql Server-Error', 'We are sorry, Your request is not updated successfully'));\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tdeleteBridgeNoFromTele(oldBridgeNumber, function (err, res) {\n\t\t\t\t\t\t\t\tif (err) myFuture.throw(new Meteor.Error('MySql Server-Error', 'We are sorry, Your request is not updated successfully'));\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tinsertBridgeNoIntoSIP(newBridgeNumber, function (err, res) {\n\t\t\t\t\t\t\t\t\t\tif (err) myFuture.throw(new Meteor.Error('MySql Server-Error', 'We are sorry, Your request is not updated successfully'));\n\t\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\t\tinsertBridgeNoIntoH323(newBridgeNumber, function (err, res) {\n\t\t\t\t\t\t\t\t\t\t\t\tif (err) myFuture.throw(new Meteor.Error('MySql Server-Error', 'We are sorry, Your request is not updated successfully'));\n\t\t\t\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\t\t\t\tHTTP.call('GET', \"http://h323.instavc.com/makeh323users/createusers.php\", function(err, res){ if (err) myFuture.throw(new Meteor.Error('MySql Server-Error', 'We are sorry, Your request is not updated successfully'));\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\tinsertBridgeNoIntoTele(newBridgeNumber, function (err, res) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (err) myFuture.throw(new Meteor.Error('MySql Server-Error', 'We are sorry, Your request is not updated successfully'));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tRoomLicense.update({_id: roomId}, {$set: {bridgeNumber: newBridgeNumber}});\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmyFuture.return(true);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t});\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t} catch (e) {\n\t\t\tconsole.log('error in update sip',e);\n\t\t\tmyFuture.throw('Type-Error', \"We are sorry something went wrong. Please try after sometime.\");\n\t\t}\n\t\treturn myFuture.wait();\n\t},\n\tdisableSip: function (bridgeNumber, roomId) {\n\t\tvar myFuture = new Future();\n\t\ttry {\n\t\t\tHTTP.post('http://indsip.instavc.com/makesipusers/delete.php', {params: {bridge: bridgeNumber}}, function(err, result){\n\t\t\t\tconsole.log(err, result);\n\t\t\t\t// callback(null, result);\n\t\t\t});\n\n\t\t\t// var deleteBridgeNoFromSIP = Meteor.wrapAsync(DeleteBridgeNoFromSIP);\n\t\t\t// var deleteBridgeNoFromH323 = Meteor.wrapAsync(DeleteBridgeNoFromH323);\n\t\t\t// var deleteBridgeNoFromTele = Meteor.wrapAsync(DeleteBridgeNoFromTele);\t\t\n\n\t\t\t// deleteBridgeNoFromSIP(bridgeNumber);\n\t\t\t// deleteBridgeNoFromH323(bridgeNumber);\n\t\t\t// deleteBridgeNoFromTele(bridgeNumber);\n\n\n\t\t\tRoomLicense.update({_id: roomId}, {$unset: {bridgeNumber: \"\"}});\n\t\t\tmyFuture.return(true);\n\t\t} catch (e) {\n\t\t\tmyFuture.throw(new Meteor.Error(\"Type-Error\",\"We are sorry, something went wrong. Please try after sometime.\"))\n\t\t}\n\t\treturn myFuture.wait();\n\t}\n});\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/*---------------------------------------------------------------------------------------------------\n-----------------------------------------------------------------------------------------------------\n------------------------------- BELOW FUNTIONS ARE NOT IN USE FOR NOW ------------------------------- \n-------------------------- WE MAY REQUIRE THEM IN THE FUTURE PLEASE DO NOT REMOVE THEM --------------\n-----------------------------------------------------------------------------------------------------\n-----------------------------------------------------------------------------------------------------*/\n\n\n\nDeleteBridgeNo = function (bridgeNo, callback) { // right now we are not using this function.\n\t// mySQLConnectionSIP.getConnection(function(err, connection) {\n\t// \tconnection.query('DELETE from extensions Where exten = ?',[bridgeNo], function(err, rows){\n\t// \t\tif (rows[0] === undefined) {\n\t// \t\t\t\tconnection.release();\n\t// \t\t\t\tcallback(null, true);\n\t// \t\t} else {\n\t// \t\t\tconnection.release();\n\t// \t\t\tcallback(null, true);\n\t// \t\t}\n\t// \t});\t\t\n\t// });\n};\n\nInsertBridgeNo = function (bridgeNo, callback) { // right now we are not using this function.\n\t// var searchQuery = 'Select * from extensions where exten = \"' + bridgeNo + '\"';\t\n\t// mySQLConnectionSIP.getConnection( function (err, connection){\n\t// \tconnection.query(searchQuery, function (err, rows, fields){\n\t// \t\tif(rows[0] === undefined ){\t\t\n //    \t\t\tconnection.query('INSERT INTO extensions (exten, context, appdata) VALUES ( ?, ?, ? ), ( ?, ?, ? )', [bridgeNo, 'instavcsip', 'SIP/${EXTEN}@mcu', bridgeNo, 'instavcsipuri', 'SIP/${EXTEN}@mcunovideo'], function (err, rows) {\n\t// \t\t\t\t\tconnection.release();\n\t// \t\t\t\t\tcallback(null, true);\n\t// \t\t\t});\n\t// \t\t} else {\n\t// \t\t\tconnection.release();\n\t// \t\t\tcallback(null, true);\n\t// \t\t}\n\t// \t});\n\t// });\n};\n\n\n\nInsertBridgeNoFORTELE = function (bridgeNo, callback) { // right now we are not using this function.\n\t// var searchQuery = 'Select * from confBridges where bridgeID = \"' + bridgeNo + '\"';\n\t// myTeleSQLConnection.getConnection( function (err, connection) {\n\t// \tconsole.log(err);\n\t// \tconnection.query(searchQuery, function (err, rows, fields) {\n\t// \t\tif (rows[0] === undefined ) {\n //    \t\t\tconnection.query('INSERT INTO confBridges (bridgeID) VALUES ( ? )', [bridgeNo], function(err, rows){\n\t// \t\t\t\t\tconnection.release();\n\t// \t\t\t\t\tcallback(null, true);\n\t// \t\t\t});\n\t// \t\t} else {\n\t// \t\t\tconnection.release();\n\t// \t\t\tcallback(null, true);\n\t// \t\t}\n\t// \t});\n\t// });\n};\n\nInsertSipUser = function (bridgeNo, sipaddr, callback) { // right now we are not using this function.\n\t// mySQLConnectionSIP.getConnection( function (err, connection) {\n\t// \tconnection.query('INSERT INTO pull_in_contact SET bridgenum = ?, uri= ?', [bridgeNo, sipaddr], function(err, rows){\n\t// \t\tconnection.release();\n\t// \t\tcallback(null, true);\n\t// \t});\n\t// });\n};\n\nInsertUser = function (strUserName, strPassword) {\n\t// mySQLConnectionSIP.getConnection( function (err, connection) {\n\t// \tconnection.query('INSERT INTO sip_buddies SET callerid = ?, name = ?, secret=?',['Raja', strUserName, strPassword], function (err, rows) {\n\t// \t\tconnection.release();\n\t// \t});\t\n\t// });\n};\n\n\nMeteor.methods({\n\tdeleteBridgeNo: function (bridgeNo) { // right now this function is not useful\n\t\t// mySQLConnectionSIP.getConnection(function(err, connection) {\n\t\t// \tconnection.query('DELETE from extensions Where exten = ?',[bridgeNo], function(err, rows){\n\t\t// \t\tconnection.release();\n\t\t// \t});\t\t\n\t\t// });\n\n\t\t// myTeleSQLConnection.getConnection(function(err, connection) {\n\t\t// \tconnection.query('DELETE from confBridges Where bridgeID = ?', [bridgeNo], function(err, rows){\n\t\t// \t\tconnection.release();\n\t\t// \t});\n\t\t// });\n\n\t\t// HTTP.post('http://indsip.instavc.com/pullin/IVC_Hangup_Template.php', {params: {channel: bridgeNo}}, function(err, result){\n\t\t// \treturn true;\n\t\t// });\n\t},\n\tcreateUserAsterisk: function (currentUserID) { // right now this function is not useful\n\t\t// var strUserName = currentUserID;// + '@sip.instavc.com';//objUserData.username;\n\t\t// var strPassword = md5(currentUserID);\n\t\t\n\t\t// mySQLConnectionSIP.getConnection( function (err, connection) {\n\t\t//  \tvar searchQuery = 'Select * from sip_buddies where name = \"' + strUserName + '\"';\n\t\t// \tconnection.query(searchQuery, function(err, rows, fields){\n\t\t// \t\tif(rows[0] === undefined ){\n\t\t// \t\t\tconnection.release();\n\t\t// \t\t\tInsertUser(strUserName, strPassword);\n\t\t// \t\t}\n\t\t// \t}); \n\t\t// });\n\t},\n\tinsertsipaddr: function (bridgeNo, sipaddr) { // right now this function is not useful.\n\t\t// HTTP.post('http://indsip.instavc.com/pullin/IVC_PullIn_Template.php', {params: {channel: bridgeNo, pullinuri: sipaddr}}, function(err, result){\n\t\t// \treturn true;\n\t\t// });\n\t}\n});\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\t\t\t// insertBridgeNoIntoSIP(bridgeNumber, function (err, res) { if (err) console.log(\"err in insert into SIP server \", err)});\n\n\t\t\t// insertBridgeNoIntoH323(bridgeNumber, function (err, res) {\n\t\t\t// \tif (err) console.log(\"err in insert into SIP server \", err);\n\t\t\t// \telse {\n\t\t\t// \t\tHTTP.call('GET', \"http://h323.instavc.com/makeh323users/createusers.php\", function(err, res){\n\t\t\t// \t\t\tconsole.log(\" res \",res);\n\t\t\t// \t\t\tconsole.log(\" err \",err);\n\t\t\t// \t\t});\n\t\t\t// \t}\n\t\t\t// });\n\n\t\t\t// insertBridgeNoIntoTele(bridgeNumber, function (err, res) {\n\t\t\t// \tif (err) console.log(\"err in insert into SIP server \", err);\n\t\t\t// });\n\n\t\t\t// RoomLicense.update({_id: roomId}, {$set: {bridgeNumber: bridgeNumber}});\t\t\t","Meteor.methods({\n\t//this block updates the ldap settings provided the user is super admin\n\tudpateLdapSettings: function (ldapSettinngsObj) {\n\t\tthis.unblock();\n\t\ttry {\n\t\t\tif (this.userId && (Meteor.users.findOne(this.userId).role == \"SA\")) {\n\t\t\t\t\tvar id = ApplicationSettings.findOne()._id;\n\t\t\t\t\tApplicationSettings.update({_id: id}, { $set: { ldapSettings: ldapSettinngsObj }});\n\t\t\t\t\treturn { result: \"Successfully updated\", error: 0};\n\t\t\t} else {\n\t\t\t\t\treturn {result: 0, error: \"You are not authorized to update LDAP Settings.\"}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\treturn { result: 0,\n\t\t\t\terror: e.sanitizedError.reason\n\t\t\t};\n\t\t} \n\t},\n\tisLoginWithLdap: function () {\n\t\ttry { \n\t\t\treturn { result: ApplicationSettings.findOne().ldapSettings.forceLogin, error: 0 };\n\t\t} catch (e) {\n\t\t\treturn { result: 0, error: \"Something went wrong\" };\n\t\t}\n\t}\n});\n\n//this function is called at startup and when super admin changes the ldap settings\nsetLDAP = function () {\n  try {\n  \t//console.log(\" setLDAP called \");\n\t\tvar ldapSettings = ApplicationSettings.findOne().ldapSettings;  \t\n \t\tMeteor.settings.ldap['domain']\t= ldapSettings['domain'];\n \t\tMeteor.settings.ldap['baseDn']\t= ldapSettings['baseDn'];\n \t\tMeteor.settings.ldap['url'] = ldapSettings['url'];\n \t\tMeteor.settings.ldap['bindCn'] = ldapSettings['bindCn'];\n \t\tMeteor.settings.ldap['bindPassword']\t= ldapSettings['bindPassword'];\n  } catch (e) {\n  \tconsole.log(\" got some error in the ldap \")\n    console.log(\" there is an error in the LDAP settings \", e);\n  }\n};","Meteor.methods({\n\tupdatedProfile: function (profileName) {\n\t\tif (this.userId) {\n\t\t\ttry {\n\t\t\t\tMeteor.users.update({_id: this.userId}, {$set: {'profile.name': profileName}});\n\t\t\t\treturn { result: \"Updated Successfully\", error: 0};\n\t\t\t} catch (e) {\n\t\t\t\tconsole.log(e);\n\t\t\t\treturn { result: 0, error: \"Something went wrong, Please try after sometime\" };\n\t\t\t}\n\t\t} else {\n\t\t\treturn \"You are not allowed to do this operation\";\n\t\t}\n\t},\n\tchangeProfileImage: function (profileImage) {\n\t\tif (this.userId) {\n\t\t\ttry {\n\t\t\t\tMeteor.users.update({_id: this.userId}, { $set: { \"profile.profileImage\": profileImage}});\n\t\t\t\treturn { result: \"Successfully updated  \", error: 0};\n\t\t\t} catch (error) {\n\t\t\t\treturn { result: 0, error: error.message };\n\t\t\t}\n\t\t} else {\n\t\t\treturn \"You do not have permission\"\n\t\t}\n\t},\n\n\tgetProfileNames: function (userIds) {\n\n\t\tvar result = [];\n\n\t\tif (! this.userId) {\n\t\t\tthrow new Meteor.Error(\"no-permission-error\", \"You do not have permission\");\n\t\t}\n\t\t//console.log(\"id:\", userId);\n\t\ttry {\n\t\t\tresult = Meteor.users.find( { _id: { $in: userIds } } );\n\t\t\tconsole.log(result.fetch().length);\n\t\t\treturn result;\n\t\t} catch (error) {\n\t\t\tthrow new Meteor.Error(\"get-username-error\", \"Could not retreive profile name\");\n\t\t}\n\t},\n\tgetProfileName: function (userId) {\n\t\t\n\t\tthis.unblock();\n\n\t\tcheck(userId, String);\n\n\t\tif (! this.userId) {\n\t\t\tthrow new Meteor.Error(\"no-permission-error\", \"You do not have permission\");\n\t\t}\n\n\t\ttry {\n\t\t\treturn Meteor.users.findOne( { _id: userId } ).profile.name;\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t\tthrow new Meteor.Error(\"get-username-error\", \"Could not retreive profile name\");\t\t\n\t\t}\n\t}\n\n});","Meteor.methods({\n// This method will return the mcu servers set in the configuration.\n\tgetMcuServersList: function () {\n\t\tif (this.userId && Meteor.users.findOne(this.userId).role == \"SA\") {\n\t\t\treturn Meteor.settings.mcuServers.servers;\n\t\t} else return [];\n\t},\n// This method will return the sip servers set in the configuration.\t\n\tgetSipServersList: function () {\n\t\tif (this.userId && Meteor.users.findOne(this.userId).role == \"SA\") {\n\t\t\treturn Meteor.settings.sipServers.servers;\n\t\t} else return [];\n\t},\n// This method will add a new room to the database(RoomLicense collection).\n// This method takes the roomObj as a parameter (consists of roomName, roomLicense, roomPassword, hostPassword).\n// First it will check whether a room is alreadt existing with a this license or not, if exists it won't allow the user to add the room.\n// Authorized users are  only allowed to add 'ROOM'. (many cases super-admin)\n\taddRoom: function (objRoom) {\n\t\tthis.unblock();\n\t\ttry {\n\t\t\tif (this.userId && (Meteor.users.findOne(this.userId).role == \"SA\")) {\n\t\t\t\tvar objExisting = RoomLicense.findOne({roomLicense: objRoom.roomLicense});\n\t\t\t\tif(objExisting) {\n\t\t\t\t\treturn { result: 0, error: 'Room a room existing with this License!'};\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log(objRoom);\n\t\t\t\t\tvar res = RoomLicense.insert(objRoom);\n\t\t\t\t\t// console.log(res);\n\t\t\t\t\treturn { result: \"Successfully saved\", error: 0};\t\t\t\t\t\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn {result: 0, error: \"You are not authorized to add rooms.\"}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.log(e);\n\t\t\treturn { result: 0, error: \"We are sorry, something went wrong.\"}\n\t\t}\n\t},\n\n// This method will add the contacts to existing room.\n// It will take two paramters (roomId and usersObj).\n// usersObj is an array of objects. [ {uid: \"fgh2345\"}, {uid: \"3456dfghjk\"}].\n// This method will set the Host to the room, if not existing (by bdefault first user of the room will be the host).\n// Only authorized user can add contatcts to the room. (mostly super-admin)\t\n\taddUsersToRoom: function (roomId, usersObj){\n\t\tthis.unblock();\n\t\ttry {\n\t\t\tif (this.userId && Meteor.users.findOne(this.userId).role == \"SA\") {\n\t\t\t\tvar users = RoomLicense.findOne({_id: roomId}).users || [];\n\n\t\t\t\tvar existingRooms = RoomLicense.find().fetch();\n\t\t\t\t\tvar usersCountOnAllRooms = 0;\n\t\t\t\t\tfor (var index in existingRooms) {\n\t\t\t\t\t\tif (existingRooms[index]['users']) usersCountOnAllRooms += existingRooms[index]['users'].length;\n\t\t\t\t\t}\n\n\t\t\t\tvar userLimitOnRooms = Meteor.settings.userLimitOnRooms;\n\n\t\t\t\tif (usersCountOnAllRooms) {\t\t\t\t\n\t\t\t\t\tif (usersCountOnAllRooms < userLimitOnRooms) {\n\t\t\t\t\t\tvar hostId = RoomLicense.findOne({_id: roomId}).hostUserId ;\n\t\t\t\t\t\t\tusers.forEach( function (doc) {\n\t\t\t\t\t\t\t\tif (doc.uid === usersObj.uId) {\n\t\t\t\t\t\t\t\t\tthrow new Meteor.Error(\"duplicate-user\", \"the user has already been added\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tRoomLicense.update( {_id: roomId}, { $push: { users: {\"uid\": usersObj.uId } } });\n\t\t\t\t\t\t\tif (! hostId) RoomLicense.update({_id: roomId}, {$set: {hostUserId: usersObj.uId}});\n\t\t\t\t\t\t} else {\n\t\t \t\t\t\t\tthrow new Meteor.Error(\"Limiting-Error\", \"Sorry user limit exceeded\");\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar hostId = RoomLicense.findOne({_id: roomId}).hostUserId ;\n\t\t\t\t\tif (! hostId) RoomLicense.update({_id: roomId}, {$set: {hostUserId: usersObj.uId}});\n\t\t\t\t\tRoomLicense.update( {_id: roomId}, { $set: { users: [{\"uid\": usersObj.uId }] } });\n\t\t\t\t}\n\t\t\t} else {\n\t\t \t\t//return {result: 0, error: \"You are not allwoed to do this operation.\"}\n\t\t \t\tthrow new Meteor.Error(\"persmission-denied\", \"You are not allowed to this operation\");\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.log(e);\n\t\t\tthrow new Meteor.Error(e.error, e.reason);\n\t\t}\n\t},\n// This will delete a single contact from the Room.\n// It will accept two parameters(roomId and the userId).\n// Only authorized user can delete the contact from the Room.\t(mostlt super-admin)\n\tdeleteContactFromRoom: function (roomId, uid) {\n\t\ttry {\n\t\t\tif (this.userId && Meteor.users.findOne(this.userId).role == \"SA\") {\n\t\t\t\t\n\t\t\t\tRoomLicense.update( {\t_id: roomId },\n\t\t\t\t\t{ $pull: { 'users': {\t'uid': uid\t}\t}\n\t\t\t\t});\n\n\t\t\t\t//have to update all the meetings the user is involved\n\n\t\t\t\tMeetings.remove({});\n\n\t\t\t\treturn {result: \"user successfully removed from room.\", error: 0};\n\t\t\t} else return { result: 0, error: \"You are not authorized to do this operation.\"}\t\t\t\n\t\t} catch (e) {\n\t\t\treturn { result: 0, error: \"Something went wrong. Please try after sometime.\"}\n\t\t}\n\t},\n\n// This method will update the existing room.\n// It will accept the two paramters (roomObj and roomId).\n// Only authorized user can update the Room.\t(mostlt super-admin)\n\tupdateRoom: function (roomId, roomObj) {\n\t\ttry {\n\t\t\tconsole.log( \"roomObj \", roomObj );\n\t\t\tif (this.userId && Meteor.users.findOne(this.userId).role == \"SA\") {\n\t\t\t\tvar result = RoomLicense.update({_id: roomId}, {$set: roomObj});\n\t\t\t\tconsole.log(\"result \", result);\n\t\t\t\treturn { result: \"Room Successfully Updated\", error: 0}\n\t\t\t} else {\n\t\t\t\treturn { result: 0, error: \"You are not allowed to this operation.\"}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t\treturn { result: 0, error: \"We are sorry sometime went wrong.\"}\n\t\t}\n\t},\n\n// This method will a Room from the database.\n// It will accept a single paramters (roomId).\n// Only authorized user can delete the Room.(mostlt super-admin)\n\tdeleteRoom: function (roomId) {\n\t\ttry {\n\t\t\tif (this.userId && Meteor.users.findOne(this.userId).role == \"SA\") {\n\t\t\t\tRoomLicense.remove({_id: roomId});\n\t\t\t\treturn {result: \"Room Successfully Deleted\", error: 0};\n\t\t\t} else { return { result: 0, error: \"You are not authorized to do this operation.\" }; } \n\t\t} catch (e) {\n\t\t\t\treturn { result: 0, error: \"Something went wrong\" };\n\t\t}\n\t},\n\n// This method will change the existing room-host.\n// It will accept the two paramters (hostId and roomId)\n// Only authorized user can change the room host.(mostlt super-admin)\t\n\tchangeRoomHost: function (roomId, uid) {\n\t\ttry {\n\t\t\tif (this.userId && Meteor.users.findOne(this.userId).role == \"SA\") {\n\t\t\t\tRoomLicense.update({_id: roomId}, {$set: {hostUserId: uid}});\n\t\t\t\treturn {result: \"Host Successfully Changed\", error: 0};\n\t\t\t} else return {result: 0, error: \"You are not allowed to do this operation.\"};\n\t\t} catch (e) {\n\t\t\treturn {result: 0, error: \"Sorry Something went wrong. Please try after sometime.\"};\n\t\t}\n\t},\n\tsearchUserByEmail: function (email) {\n\t\tthis.unblock(); //allows other clients to call this method \t\n\t\tconsole.log(\"email from client:\", email);\n\t\ttry {\n\t\t\tvar userData = Accounts.findUserByEmail(email);\n\t\t\tif (userData === undefined) {\n\t\t\t\tthrow new Meteor.Error(\"no-user\", \"user with the given email address could not be found\");\n\t\t\t} else return {\n\t\t\t\t\temail: userData.emails[0][\"address\"],\n\t\t\t\t\tuId: userData._id\n\t\t\t} \n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t\tthrow new Meteor.Error(\"user-search-failed\", error.message);\n\t\t} \n\t},\n\taddAll: function () {\n\t\tconsole.log(\"called\");\n\t\tif (! this.userId || ( Meteor.users.findOne(this.userId).role !== \"SA\") ) {\n\t\t\tconsole.log(\"not permitted\");\n\t\t\tthrow new Meteor.Error(\"no-permission\", \"You do not have permission to add users\");\n\t\t} else {\n\t\t\tconsole.log(\"id:\", this.userId);\n\t\t\ttry {\n\t\t\t\treturn Meteor.users.find({\"profile.createdBy\": this.userId});\n\t\t\t} catch (error) {\n\t\t\t\tconsole.log(error);\n\t\t\t}\n\t\t}\n\t}\n});\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// ------------------- FOR THE FUTURE REFERENCE (SEND INVIATION MAIL ON ADDING A USER TO A ROOM) --------------\n\n\n\n\n// This method will update the existing room-name.\n// It will accept the two paramters (roomName and roomId).\n// Only authorized user can delete the contact from the Room.\t(mostlt super-admin)\n\t// updateRoomName: function (roomName, roomId) {\n\t// \ttry {\n\t// \t\tif (this.userId && Meteor.users.findOne(this.userId).role == \"SA\") {\n\t// \t\t\tvar result = RoomLicense.update({_id: roomId}, {$set: {roomName: roomName}});\n\t// \t\t\tif (result) return {result: \"Room Name Successfully Updated\", error: 0};\n\t// \t\t\telse return {result: 0, error: result};\n\t// \t\t} else {\n\t// \t\t\treturn {result: 0, error: \"You are not allowed to updated the Room\"}\n\t// \t\t}\n\t// \t} catch (e) { return {result: 0, error: \"Something went wrong\"}; }\n\t// },\n// This method will update the existing room-password.\n// It will accept the two paramters (roomPassword and roomId).\n// Only authorized user can update the existing roomPassword of a Room.\t(mostlt super-admin)\t\n\t// updateRoomPassword: function (roomPassword, roomId) {\n\t// \ttry {\n\t// \t\tif (this.userId && Meteor.users.findOne(this.userId).role == \"SA\") {\n\t// \t\t\tvar result = RoomLicense.update({_id: roomId}, {$set: {roomPassword: roomPassword}});\n\t// \t\t\tif (result) return {result: \"Room Password Successfully Updated\", error: 0};\n\t// \t\t\telse return {result: 0, error: result};\n\t// \t\t} else {\n\t// \t\t\treturn {result: 0, error: \"You are not allowed to updated the Room\"}\n\t// \t\t}\n\t// \t} catch (e) { return {result: 0, error: \"Something went wrong\"}; }\n\t// },\n// This method will update the existing host-password.\n// It will accept the two paramters (hostPassword and roomId).\n// Only authorized user can update the hostPassword of a Room.(mostlt super-admin)\n\t// updateHostPassword: function (hostPassword, roomId) {\n\t// \ttry {\n\t// \t\tif (this.userId && Meteor.users.findOne(this.userId).role == \"SA\") {\n\t// \t\t\tvar result = RoomLicense.update({_id: roomId}, {$set: {hostPassword: hostPassword}});\n\t// \t\t\tif (result) return {result: \"Host Password Successfully Updated\", error: 0};\n\t// \t\t\telse return {result: 0, error: result};\n\t// \t\t} else {\n\t// \t\t\treturn {result: 0, error: \"You are not allowed to updated the Room\"}\n\t// \t\t}\n\t// \t} catch (e) { return {result: 0, error: \"Something went wrong\"}; }\n\t// },\n\n\n\n\n\n\n\n\t\t// SSR.compileTemplate(\"roomMailTemplate\",Assets.getText(\"roomMailTemplate.html\"));\n\t\t// var objExisting = RoomLicense.findOne({$and: [\n  //                                             {_id: roomId },\n  //                                             {'users.uid': objRoomCot.uid}\n  //                                         ]});\n\t\t// if(objExisting){\n\t\t// \t//If anything required later.\n\t\t// }else{\n\t\t// \tvar result = RoomLicense.update(objRoomCot.roomID, {$push: {users: {uid: objRoomCot.uid}}});\n\t\t// \tif (result) {\n\t\t// \t\t//send mail to user\n\n\t\t// \t\tvar user = Meteor.users.findOne({_id: objRoomCot.uid});\n\n\t\t// \t\ttry {\n\t\t// \t\t\tvar roomCreator = Meteor.users.findOne({_id: this.userId}).profile.name;\n\t\t// \t\t} catch (error) {\n\t\t// \t\t\tconsole.log(\"room creator error:\", error);\n\t\t// \t\t} finally {\n\t\t// \t\t\t//console.log(\"sender:\", roomCreator);\n\t\t// \t\t}\n\n\t\t// \t\ttry {\n\t\t// \t\t\tvar room = RoomLicense.findOne({_id: objRoomCot.roomID});\n\t\t// \t\t} catch (error) {\n\t\t// \t\t\tconsole.log(\"roomName fetch error:\", error.message);\n\t\t// \t\t} finally {\n\t\t// \t\t\t//console.log(room.roomName);\n\t\t// \t\t}\n\n\t\t// \t\tvar emailData = {\n\t\t// \t\t\temailAddress: user.username,\n\t\t// \t\t\tuserName:  user.profile.name,\n\t\t// \t\t\troomCreator: roomCreator,\n\t\t// \t\t\troomName: room.roomName,\n\t\t// \t\t\ttime: room.createdOn\n\t\t// \t\t};\n\n\t\t// \t\ttry {\n\t\t// \t\t\tEmail.send({\n\t\t// \t\t\t\tto: emailData.emailAddress,\n\t\t// \t\t\t\tfrom: \"Admin@InstaVC.com\",\n\t\t// \t\t\t\tsubject: \"Meeting room booked for you\",\n\t\t// \t\t\t\thtml: SSR.render(\"roomMailTemplate\", emailData)\n\t\t// \t\t\t});\n\t\t// \t\t} catch (error) {\n\t\t// \t\t\tconsole.log(error);\n\t\t// \t\t}\t\n\t\t// \t}\n","Meteor.methods({\n\t//this function will update the mail smtp settings provided the user is SUPER ADMIN\n\tupdateSmtpSettings: function (smtpSettingsObj) {\n\t\tthis.unblock();\n\t\ttry {\n\t\t\tif (this.userId && (Meteor.users.findOne(this.userId).role == \"SA\")) {\n\t\t\t\t\tvar id = ApplicationSettings.findOne()._id;\n\t\t\t\t\tvar result = ApplicationSettings.update({_id: id}, { $set: { smtpSettings: smtpSettingsObj }});\n\t\t\t\t\treturn { result: \"Successfully saved\", error: 0};\n\t\t\t}\telse {\n\t\t\t\t\treturn {result: 0, error: \"You are not authorized to update SMTP Settings.\"}\t\t\t\t\n\t\t\t}\n\t\t} catch (e) {\n\t\t\treturn { result: 0,\n\t\t\t\terror: e.sanitizedError.reason\n\t\t\t};\n\t\t}\n\t}\n});\n\n//this function will query the database for existing mail smtp settings and if true will set the MAIL_URL\nsetMAIL_URL = function () {\n  try {\n    var smtp = ApplicationSettings.findOne().smtpSettings;\n    if (smtp) {\n    \tconsole.log(\"setting setMAIL_URL again\");\n      process.env.MAIL_URL = \"smtp://\"+smtp.userName+\":\"+smtp.password+\"@\"+smtp.server+\":\"+smtp['port'];\n    }\n  } catch (e) {\n    console.log( \"SMTP settings still not set by the Super Admin\");\n  }\n};","Meteor.methods({\n\tcreateNewUser: function(newUser){    this.unblock();\n    if (this.userId && (Meteor.users.findOne(this.userId).role == \"SA\")) {\n      var userLimitOnApplication = Meteor.settings.userLimitOnApplication;\n        if (Meteor.users.find().count() < userLimitOnApplication) {\n          try {\n            var res = Accounts.createUser({\n              username: newUser.userEmail,\n              password: newUser.password,\n              email: newUser.userEmail,\n              profile: {\n                name: newUser.fullname,\n                userType: newUser.userType,\n                createdBy: this.userId\n              }\n            });\n          } catch (error) {\n            return { error: error.message, message:\"User creation failed\"};\n          }\n            if (res) {\n              try {\n                var status = Meteor.users.update({_id: res}, {$set: {role: newUser.userRole}});\n                return { error: \"no error\", message:\"User Created Successfully\" };\n                if (status) {\n                  try {\n                    Accounts.sendEnrollmentEmail(res, newUser.userEmail);\n                  } catch (error) {\n                    console.log(\"email sending failed\", error.message);\n                  }\n                }  \n              } catch (error) {\n                return {error: error.message, message: \"user role set failed\" }\n              }\n            }\n        } else {\n          console.log(\"user limit exceeded in the application level\");\n          return { error: \"Limitation Error\", message:\"User limit is exceeded.\" };          \n        }\n    } else {\n        return { error: \"permission error\", message:\"You do not have permission to create user\" };\n    }\n\t},\n  deleteUserFromDB: function (userId) {\n    try {\n      if (this.userId && Meteor.users.findOne(this.userId).role == \"SA\") {\n        Meteor.users.remove({_id: userId});\n        return {result: \"User removed Successfully\", error: 0};\n      } else {\n        return {result: 0, error: \"You are not autherized to this operation.\"};\n      }      \n    } catch (e) {\n      console.log( \"Error while deleting the user from database\" );\n      return {result: 0, error: \"Sorry somethig went wrong. Please try after sometime.\"};\n    }\n  },\n  updateUser: function (userDetails, userId) {\n    try {\n      var stat = Meteor.users.update({_id: userId}, \n        {$set: {\"modifiedAt\": new Date(),\n          \"profile.modifiedBy\" : this.userId,  \n          \"username\": userDetails.userEmail, \n          \"emails.0.address\": userDetails.userEmail, \n          \"profile.name\": userDetails.fullname, \n          \"profile.userType\": userDetails.userType, \n          \"profile.createdBy\": this.userId,\n          \"role\": userDetails.userRole,\n          \"corporateId\": userDetails.corporateId\n        }});   \n    } catch (error) {\n      console.log(error.message);\n      throw new Meteor.Error(\"update-failed\", error.message);\n    }\n  }\n});","Meteor.methods({\n\n\t\"updateWhiteLabelSettings\": function ( whiteLabelSettingsObj ) {\n\t\t\n\t\tthis.unblock();\n\t\tvar id;\n\n\t\t//console.log(whiteLabelSettingsObj);\n\n\t\t//check for sa role and userId\n\t\tif ( (! this.userId ) || ( ( Meteor.users.findOne(this.userId).role !== \"SA\") ) ) {\n\n\t\t\tthrow new Meteor.Error(\"no-permission\", \"You do not have permission to do this operation\");\n\n\t\t}else {\n\t\t\n\t\t\t//get the id of the doc\n\t\t\ttry {\n\t\t\t\tid = ApplicationSettings.findOne()._id;\n\t\t\t}catch (error) {\n\t\t\t\tconsole.log(\"error:\", error);\n\t\t\t\tthrow new Meteor.Error(\"get-docId-failed\", \"Failed to fetch the id of docuemnt to be updated\");\n\t\t\t}\n\n\t\t\t//update the doc\n\t\t\ttry {\n\t\t\t\tApplicationSettings.update({_id: id}, { $set: { whiteLabelSettings: whiteLabelSettingsObj }});\n\t\t\t}catch(error) {\n\t\t\t\tconsole.log(\"error whiteLabelSettings:\", error.sanitizedError.reason);\n\t\t\t\tthrow new Meteor.Error(\"whiteLabel-update-failed\", \"Failed to update whiteLabel settings\");\n\t\t\t}\n\t\t\n\t\t}\n\n\t},\n\tgetHomeLogo: function () {\n\t\ttry {\n\t\t\tvar res = ApplicationSettings.findOne({}).whiteLabelSettings.homePageLogoURL;\n\t\t\treturn res;\n\t\t}catch (error) {\n\t\t\tconsole.log(\"error\", error);\n\t\t}\n\t},\n\tgetInnerLogo: function () {\n\t\ttry {\n\t\t\tvar res = ApplicationSettings.findOne({}).whiteLabelSettings.innerLogoURL;\n\t\t\t//console.log(res);\n\t\t\treturn res;\n\t\t}catch (error) {\n\t\t\tconsole.log(\"error\", error);\n\t\t}\n\t}\n});\n\nsetDefaultWhiteLabelSettings = function() {\n\t\n\ttry {\n\t\t\n\t\tvar res = ApplicationSettings.findOne({}).whiteLabelSettings;\n\n\t\tif (! res) {\n\n\t\t\tvar whiteLabelSettings = {\n\n\t\t\t\t\thomePageLogoURL: \"\",\n\t\t\t\t\tinnerLogoURL: \"\",\n\t\t\t\t\thostRingToneLoopBack: false,\n\t\t\t\t\tcallEndConfirmation: false\n\t\t\t};\n\n\t\t\tApplicationSettings.update( \n\t\t\t\t{ _id: ApplicationSettings.findOne()._id },\n\t\t\t\t{\t$set: { \"whiteLabelSettings\" : whiteLabelSettings\t} } \n\t\t\t);\n\n\t\t}\n\t}catch (error) {\n\t\tconsole.log(error);\n\t}\n}","var Schemas = {};\n\nSchemas.ApplicationSetting = new SimpleSchema({\n\t\n\t\"smtpSettings.userName\": {\n\t\ttype: String,\n\t\toptional: true\n\t},\n\t\"smtpSettings.password\": {\n\t\ttype: String,\n\t\toptional: true\n\t},\n\t\"smtpSettings.server\": {\n\t\ttype: String,\n\t\toptional: true\n\t},\n\t\"smtpSettings.port\": {\n\t\ttype: String,\n\t\toptional: true\t\t\n\t},\n\t\n\t/*Schema LDAP settings will start from here*/\n\n\t\"ldapSettings.domain\": {\n\t\ttype: String,\n\t\toptional: true\n\t},\n\t\"ldapSettings.baseDn\": {\n\t\ttype: String,\n\t\toptional: true\n\t},\n\t\"ldapSettings.url\": {\n\t\ttype: String,\n\t\toptional: true\n\t},\n\t\"ldapSettings.bindCn\": {\n\t\ttype: String,\n\t\toptional: true,\n\t},\n\t\"ldapSettings.bindPassword\": {\n\t\ttype: String,\n\t\toptional: true,\n\t},\n\t\"ldapSettings.forceLogin\": {\n\t\ttype: Boolean,\n\t\toptional: true,\n\t\tdefaultValue: false\n\t},\n\n\t// WhiteLabel Settings Schema start here\n\n\t\"whiteLabelSettings.innerLogoURL\": {\n\t\ttype: String,\n\t\toptional: true\n\t},\n\n\t\"whiteLabelSettings.homePageLogoURL\": {\n\t\ttype: String,\n\t\toptional: true\n\t},\n\n\t\"whiteLabelSettings.hostRingToneLoopBack\": {\n\t\ttype: Boolean,\n\t\toptional: true,\n\t\tdefaultValue: false\n\t},\n\n\t\"whiteLabelSettings.callEndConfirmation\": {\n\t\ttype: Boolean,\n\t\toptional: true,\n\t\tdefaultValue: false\n\t},\n\n\t// WhiteLabel Settings end here\n\n\tcreatedBy: {\n\t\ttype: String,\n\t\tautoValue: function () {\n\t\t\tif (this.isInsert) {\n\t\t\t\treturn this.userId || \"application\"\t\t\t\n\t\t\t} else {\n\t\t\t\tthis.unset();\n\t\t\t}\n\t\t}\n\t},\n\tcreatedOn: {\n\t\ttype: Date,\n\t\tautoValue: function () {\n\t\t\tif (this.isInsert){\n\t\t\t\treturn new Date();\n\t\t\t}\n\t\t}\n\t},\n\tmodifiedBy: {\n\t\ttype: String,\n\t\tautoValue: function () {\n\t\t\tif (this.isUpdate) {\n\t\t\t\treturn this.userId;\n\t\t\t}\n\t\t},\n\t\tdenyInsert: true,\n\t\toptional: true\n\t},\n\tmodifiedOn: {\n\t\ttype: Date,\n\t\tautoValue: function () {\n\t\t\tif (this.isUpdate) {\n\t\t\t\treturn new Date();\n\t\t\t}\n\t\t},\n\t\tdenyInsert: true,\n\t\toptional: true\t\t\n\t}\n});\n\n\nApplicationSettings.attachSchema( Schemas.ApplicationSetting );","\nvar Schemas = {};\n\nSchemas.Corporate = new SimpleSchema({\n\tbusinessName: {\n\t\ttype: String\n\t},\n\tofficeAddr1: {\n\t\ttype: String,\n\t\toptional: true\n\t},\n\tofficeAddr2: {\n\t\ttype: String,\n\t\toptional: true\n\t},\n\tphoneNo: {\n\t\ttype: String,\n\t\toptional: true\n\t},\n\twebsiteAddr: {\n\t\ttype: String,\n\t\toptional: true\n\t},\n\tcompanyStatus: {\n\t\ttype: String,\n\t\toptional: true\n\t},\n\tcontactPerson: {\n\t\ttype: String,\n\t\toptional: true\n\t},\n\tcontactPhone: {\n\t\ttype: String,\n\t\toptional: true\n\t},\n\tcontactEmail: {\n\t\ttype: String,\n\t\toptional: true\n\t},\n\tpublishLimit: {\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\tsubscriberLimit:{\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\troomLimit: {\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\tpanNumber: {\n\t\ttype: String,\n\t\toptional: true\n\t},\n\ttanID: {\n\t\ttype: String,\n\t\toptional: true\n\t},\n\tcreatedBy: {\n\t\ttype: String,\n\t\tautoValue: function () {\n\t\t\tif (this.isInsert) {\n\t\t\t\treturn this.userId || \"application\"\t\t\t\n\t\t\t} else {\n\t\t\t\tthis.unset();\n\t\t\t}\n\t\t}\n\t},\n\tcreatedOn: {\n\t\ttype: Date,\n\t\tautoValue: function () {\n\t\t\tif (this.isInsert){\n\t\t\t\treturn new Date();\n\t\t\t}\n\t\t}\n\t},\n\tmodifiedBy: {\n\t\ttype: String,\n\t\tautoValue: function () {\n\t\t\tif (this.isUpdate) {\n\t\t\t\treturn this.userId;\n\t\t\t}\n\t\t},\n\t\tdenyInsert: true,\n\t\toptional: true\n\t},\n\tmodifiedOn: {\n\t\ttype: Date,\n\t\tautoValue: function () {\n\t\t\tif (this.isUpdate) {\n\t\t\t\treturn new Date();\n\t\t\t}\n\t\t},\n\t\tdenyInsert: true,\n\t\toptional: true\t\t\n\t}\n});\n\nCorporate.attachSchema( Schemas.Corporate );","\nvar Schemas = {};\n\nSchemas.Logger = new SimpleSchema({\n\tActivityCode: {\n\t\ttype: String\n\t},\n\tMessage: {\n\t\ttype: String\n\t},\n\tuid: {\n\t\ttype: String\n\t},\n\tcreatedBy: {\n\t\ttype: String,\n\t\tautoValue: function () {\n\t\t\tif (this.isInsert) {\n\t\t\t\treturn this.userId || \"application\"\t\t\t\n\t\t\t} else {\n\t\t\t\tthis.unset();\n\t\t\t}\n\t\t}\n\t},\n\tcreatedOn: {\n\t\ttype: Date,\n\t\tautoValue: function () {\n\t\t\tif (this.isInsert){\n\t\t\t\treturn new Date();\n\t\t\t}\n\t\t}\n\t},\n\tmodifiedBy: {\n\t\ttype: String,\n\t\tautoValue: function () {\n\t\t\tif (this.isUpdate) {\n\t\t\t\treturn this.userId;\n\t\t\t}\n\t\t},\n\t\tdenyInsert: true,\n\t\toptional: true\n\t},\n\tmodifiedOn: {\n\t\ttype: Date,\n\t\tautoValue: function () {\n\t\t\tif (this.isUpdate) {\n\t\t\t\treturn new Date();\n\t\t\t}\n\t\t},\n\t\tdenyInsert: true,\n\t\toptional: true\t\t\n\t}\n});\n\nLogger.attachSchema( Schemas.Logger );","var Schemas = {};\n\nSchemas.Meeting = new SimpleSchema({\n\t\"meetingName\": {\n\t\ttype: String\n\t},\n\t\"meetingDetails\": {\n\t\ttype: String,\n\t\toptional: true\n\t},\n\t\"startTime\": {\n\t\ttype: Date\n\t},\n\t\"endTime\": {\n\t\ttype: Date\n\t},\n\tmeetingRoomId: {\n\t\ttype: String\n\t},\n\troomParticipants: {\n\t\ttype: [String]\n\t},\n\temailDelivered: {\n\t\ttype: String\n\t},\n\tcreatedBy: {\n\t\ttype: String,\n\t\tautoValue: function () {\n\t\t\tif (this.isInsert) {\n\t\t\t\treturn this.userId\t\t\t\n\t\t\t} else {\n\t\t\t\tthis.unset();\n\t\t\t}\n\t\t}\n\t},\n\tcreatedOn: {\n\t\ttype: Date,\n\t\tautoValue: function () {\n\t\t\tif (this.isInsert){\n\t\t\t\treturn new Date();\n\t\t\t}\n\t\t}\n\t},\n\tmodifiedBy: {\n\t\ttype: String,\n\t\tautoValue: function () {\n\t\t\tif (this.isUpdate) {\n\t\t\t\treturn this.userId;\n\t\t\t}\n\t\t},\n\t\tdenyInsert: true,\n\t\toptional: true\n\t},\n\tmodifiedOn: {\n\t\ttype: Date,\n\t\tautoValue: function () {\n\t\t\tif (this.isUpdate) {\n\t\t\t\treturn new Date();\n\t\t\t}\n\t\t},\n\t\tdenyInsert: true,\n\t\toptional: true\t\t\n\t}\t\n});\n\nMeetings.attachSchema( Schemas.Meeting );","\nvar Schemas = {};\n\nSchemas.RoomLicense = new SimpleSchema({\n\t\n\troomLicense: {\n\t\ttype: String\n\t},\n\troomName: {\n\t\ttype: String\n\t},\n\thostUserId: {\n\t\ttype: String,\n\t\toptional: true\n\t},\n\tcorporateId: {\n\t\ttype: String,\n\t\toptional: true\n\t},\n\tmcuServer: {\n\t\ttype: String,\n\t\toptional: true\n\t},\n\tsipServer: {\n\t\ttype: String,\n\t\toptional: true\n\t},\t\n\thostPassword: {\n\t\ttype: String,\n\t\toptional: true\n\t},\n\troomPassword: {\n\t\ttype: String,\n\t\toptional: true\n\t},\n\tvideoMode: {\n\t\ttype: String,\n\t\toptional: false\n\t},\n\tguestLoginToken: {\n\t\ttype: String,\n\t\toptional: true\n\t},\n\tusers: {\n\t\ttype: Array,\n\t\toptional: true\n\t},\n\tWBStatus: {\n\t\ttype: String,\n\t\toptional: true\n\t},\n\tbridgeNumber: {\n\t\ttype: String,\n\t\toptional: true\n\t},\n\t\"users.$\": {\n\t\ttype: Object\n\t},\n\t\"users.$.uid\": {\n\t\ttype: String\n\t},\n\tcreatedBy: {\n\t\ttype: String,\n\t\tautoValue: function () {\n\t\t\tif (this.isInsert) {\n\t\t\t\treturn this.userId || \"application\"\t\t\t\n\t\t\t} else {\n\t\t\t\tthis.unset();\n\t\t\t}\n\t\t}\n\t},\n\tcreatedOn: {\n\t\ttype: Date,\n\t\tautoValue: function () {\n\t\t\tif (this.isInsert){\n\t\t\t\treturn new Date();\n\t\t\t}\n\t\t}\n\t},\n\tmodifiedBy: {\n\t\ttype: String,\n\t\tautoValue: function () {\n\t\t\tif (this.isUpdate) {\n\t\t\t\treturn this.userId;\n\t\t\t}\n\t\t},\n\t\tdenyInsert: true,\n\t\toptional: true\n\t},\n\tmodifiedOn: {\n\t\ttype: Date,\n\t\tautoValue: function () {\n\t\t\tif (this.isUpdate) {\n\t\t\t\treturn new Date();\n\t\t\t}\n\t\t},\n\t\tdenyInsert: true,\n\t\toptional: true\t\t\n\t}\n});\n\nRoomLicense.attachSchema( Schemas.RoomLicense );","Meteor.methods({\n\tautoInsertOrUpdate: function(objEntity){\n\t\tconsole.log(objEntity);\n\t}\n});","Meteor.methods({\n\tgetMyRoom: function(roomlic){\n\t\tthis.unblock();\n\t\tvar getroomdet = Meteor.wrapAsync(getRoomDetails);\n\t\treturn getroomdet(roomlic);\n\t},\n\tuserDetails: function(uid){\n\t\tthis.unblock();\n\t\tvar objUser = Meteor.users.findOne(uid);\n\t\tif(objUser){\n\t\t\treturn Meteor.users.findOne(uid).profile.name;\n\t\t}else{\n\t\t\treturn null;\n\t\t}\n\t},\n\troomName: function(roomid){\n\t\tthis.unblock();\n\t\treturn RoomLicense.findOne({roomLicense: roomid}).roomName;\n\t},\n\tgetMyToken: function(roomid){\n\t\tthis.unblock();\n\t\tvar getroomtoken = Meteor.wrapAsync(getTokenDetails);\n\t\treturn getroomtoken(roomid, Meteor.user().profile.name, 'presenter');\n\t},\n\tgetMyTokenforGuest: function(roomid, Name){\n\t\tthis.unblock();\n\t\tvar getroomtoken = Meteor.wrapAsync(getTokenDetails);\n\t\treturn getroomtoken(roomid, Name, 'presenter');\n\t},\n\tupdateRoomStatus: function(whiteboardstatus, roomlic){\n\t\treturn RoomLicense.update({roomLicense: roomlic}, {$set :{WBStatus: whiteboardstatus}});\n\t},\n\tvalidateHost: function(roomlic, pwd){\n\t\tthis.unblock();\n\t\tvar objRoom = RoomLicense.findOne({roomLicense: roomlic});\n\t\t//console.log(objRoom);\n\t\tif(objRoom){\n\t\t\tif(pwd === objRoom.hostPassword){\n\t\t\t\treturn true;\n\t\t\t}else{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}else{\n\t\t\treturn false;\n\t\t}\n\t},\n\tlogger: function(TopicCode, Message){\n\t\t\n\t}\n});\n   \nfunction getRoomDetails (roomid, callback) {\n\t\n\tvar objRoom = RoomLicense.findOne({_id: roomid});\n\n\ttry {\n\t\tvar url = 'https://' + objRoom.mcuServer + '/getRoom/' + objRoom.roomLicense;\n\t\tHTTP.call('GET', url, {rejectUnauthorized:false}, function(err, res){\n\t\t\tconsole.log(err);\n\t\t\tcallback(null, res.content);\n\t\t});\n\t} catch (e) {\n\t\tcallback(e, null);\n\t}\n\n};\n\ngetTokenDetails = function(roomid, username, rolename, callback){\n\tvar objRoom = RoomLicense.findOne({roomLicense: roomid});\n\t//console.log(objRoom);\n\tvar url = 'https://' + objRoom.mcuServer + '/createToken/';\n\tvar body = {room: roomid, username: username, role: rolename};\n\tHTTP.call('POST', url, {data: body, rejectUnauthorized:false}, function(err, res){\n\t\t//console.log(err);\n\t\tcallback(null, res.content);\n\t});\n}\n\n// createRoom(\"Raja\", function(res){\n// \tif(res.statusCode == 200){\n// \t\tconsole.log(res.content);\n// \t}\n// })\n\n// function createRoom (room, callback) {\n//     // var req = new XMLHttpRequest();\n//     var url = MCU_URL + 'createRoom/';\n//     var body = {name: room};\n//     HTTP.call('POST', url, {data: body}, function(err, res){\n//     \tif(!err){\n//     \t    \tcallback(res);\n//     \t}else{\n//     \t\tconsole.log('--------ERROR----------');\n//     \t\tconsole.log(err);\n//     \t}\n//     });\n// }\n\n\n/*\nvar updates = {};\nupdates[key] = valueObj[id];\nvar roomelem = {\n\t\tname\t\t\t: 'Sample Name',\n\t\tmode \t\t\t: 'hybrid',\n\t\tpublishLimit \t: -1,\n\t\tuserLimit\t\t: -1,\n\t\tmediaMixing\t\t: {\n\t\t\t\t\t\t\tvideo: {\n\t\t\t\t\t\t\t\tavCoordinated\t: true,\n\t\t\t\t\t\t\t\tmaxInput\t\t: 16,\n\t\t\t\t\t\t\t\tresolution\t\t: 'vga',\n\t\t\t\t\t\t\t\tmultistreaming \t: true,\n\t\t\t\t\t\t\t\tbitrate \t\t: 300,\n\t\t\t\t\t\t\t\tbkColor\t\t\t: 'black',\n\t\t\t\t\t\t\t\tlayout: {\n\t\t\t\t\t\t\t\t\tbase \t\t: \"fluid\" | \"void\" | \"lecture\",\n\t\t\t\t\t\t\t\t\tcustom\t\t: []\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t  \t}\n\t\t\t\t\t\t  \taudio: null,\n\t\t\t\t\t\t  },\n\t\tenableMixing \t: false,\n\t}\n\nnuve.updateRoom(roomId, updates, function(err, resp) {\n        if (err) return notify('error', 'Update Room', resp);\n        setTimeout(function() {\n          p.find('.editable-unsaved').removeClass('editable-unsaved');\n        }, 20);\n        roomCache[roomId] = JSON.parse(resp);\n        notify('info', 'Update Room Success', roomId);\n      });\n\n*/","Meteor.methods({\n\t\n});","Meteor.methods({\n\tinsertMessages: function () {\n\t\tvar chatRoomId = \"3tx4bCQBiRAbHsB3x\";\n\t\tvar messages = [], sentBy = \"\"\n\t\tfor (var i=0; i<=20; i++) {\n\t\t\tif (i%2 == 0) sentBy = \"85kK9zipfvCGGw7TB\";\n\t\t\telse sentBy = \"Spr4mGoMp2FF4H2jR\";\n\t\t\tmessages.push({ chatRoomId: chatRoomId, message: \"Hello \"+i, type:\"text\", sentBy: sentBy, sentAt: new Date()});\n\t\t}\n\n\t\tvar result = Messages.insert({chatRoomId: chatRoomId, chatDate: 2016225, dateForUI: new Date(\"2016-02-25 16:49\"), messages: messages});\n\t\tconsole.log(\"result  \",result);\n\t}\n});","Meteor.methods({\n\tUpdateMyAccount: function(objEntity){\n    \tthis.unblock();\n\n    \tMeteor.users.update({_id:this.userId}, {$set: objEntity});\n\n    \treturn true;\n\t},\n\tSaveCorporate: function(objEntity, uval){\n\t\tthis.unblock();\n\t\tif(uval == ''){\n\t\t\tCorporate.insert(objEntity);\n\t\t}else{\n\t\t\tCorporate.update({_id: uval}, {$set: objEntity});\n\t\t}\n\t\treturn true;\n\t},\n\tSaveUsers: function(objEntity, uval){\n\t\tthis.unblock();\n\t\tif(uval == ''){\n\t\t\t// Meteor.call('createNewUser', function(err, succ){\n\t\t\t// \treturn succ;\n\t\t\t// });\n\t\t}else{\n\n\t\t}\t\n\t},\n\tUpdateMyLDAP: function(objEntity){\n    \tthis.unblock();\n    \tApplicationSettings.update({},{$set: objEntity});\n    \treturn true;\n\t}\n});","Meteor.startup(function () {\n  SyncedCron.config({\n    // log: true,                          // Log job run details to console\n    logger: null,                       // Use a custom logger function (defaults to Meteor's logging package)\n    collectionName: 'cronHistory',      // Name of collection to use for synchronisation and logging\n    utc: true                           // Default to using localTime\n    // collectionTTL: 172800\n  });\n\n  SyncedCron.add({\n    name: 'Send Emails to Participants in the Meeting before 15 min of the Meeting.',\n    schedule: function(parser) {\n      return parser.text('every 5 minutes');\n    },\n    job: function() {\n      var currentTime = new Date();\n      var gtTime = new Date(); // time for greater than option.\n\n      var getMinutes = currentTime.getMinutes();\n      var setMinutes = currentTime.setMinutes( getMinutes + 20);\n      \n      var ltTime = new Date(setMinutes); // time for less than option.\n\n      var meetings = Meetings.find({startTime: {$gte: gtTime, $lte: ltTime }, emailDelivered: \"NO\"}).fetch();\n\n      console.log(\"meetings \", meetings);\n      for (var meeting in meetings) {\n        var participants = meetings[meeting]['roomParticipants'];\n        for (var participant in participants) {\n            console.log(\"participant \",participants[participant]);\n            Email.send({\n              to: participants[participant],\n              from: \"InstaVC Admin<no-reply@instavc.com>\",\n              subject: \"InstaVC Meeting Notification\",\n              html: \"<html><p>You have been invited to a meeting in InstaVC, which is scheduled on  \"+ meetings[meeting]['startTime'] + \".</p></html>\"\n            });\n        }\n        Meetings.update({_id: meetings[meeting]._id}, {$set: {emailDelivered: \"YES\"} });\n      }\n    }\n  });\n  SyncedCron.start();\n});","Meteor.methods({\n\tcreateMeeting: function (newMeeting) {\n\t\ttry {\n\t\t\t//find all meetings booked in that room\n\t\t\tvar roomCursor = Meetings.find({meetingRoomId: newMeeting.meetingRoomId});\n\t\t\tvar sT = moment(newMeeting.startTime);  // start time of the meeting (startTime) from newMeeting object\n\t\t\tvar eT = moment(newMeeting.endTime);\t\t// end time of the meeting (endTime) from newMeeting object\n\n\t\t\tif (roomCursor.count() !== 0) {\n\t\t\t\troomCursor.forEach( function (room) {\n\t\t\t\t\tvar rsT = moment(room.startTime);  // startTime from room obj ( existing room objects )\n\t\t\t\t\tvar reT = moment(room.endTime);    // endTime from room obj ( existing room objects )\n\t\t\t\t\tif ( sT.isSame(rsT) ) {\n\t\t\t\t\t throw new Meteor.Error(\"This time is already allocated to another slot with this room\", \"Select another slot or another room\");\n\t\t\t\t\t} else if  ( sT.isAfter(rsT) && eT.isBefore(reT) ) {\n\t\t\t\t\t\tthrow new Meteor.Error(\"This time is already allocated to another slot with this room\", \"Select another slot or another room\");\n\t\t\t\t\t} else if ( sT.isAfter(rsT) && sT.isBefore(reT) ) {\n\t\t\t\t\t\tthrow new Meteor.Error(\"Meeting start time is in between pre booked slot\", \"Select another slot or another room\");\n\t\t\t\t\t} else if ( eT.isAfter(rsT) && eT.isBefore(reT) ) {\n\t\t\t\t\t\tthrow new Meteor.Error(\"Meeting end  time is in between pre booked slot\", \"Select another slot or another room\");\n\t\t\t\t\t} else if ( sT.isBefore(rsT) && ( eT.isAfter(reT) || eT.isAfter(rsT) ) ) {\n\t\t\t\t\t\tthrow new Meteor.Error(\"Meeting end time conflict\", \"Select another slot or another room\");\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn Meetings.insert(newMeeting);\n\t\t\t} else {\n\t\t\t\treturn Meetings.insert(newMeeting);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\treturn new Meteor.Error(\"Type-Error\", \"Please select other room or other time slots.\");\n\t\t}\n\t},\n\t// this will return the schedules of that room\n\tgetSchedulesCurrentRoom: function (roomLic) {\n\t\ttry {\n\t\t\tvar roomId = RoomLicense.findOne({\"roomLicense\": roomLic})._id;\n\t\t\tvar currentTime = new Date();\n\t\t\tconsole.log(\"roomId is \", roomId);\n\t\t\tvar meeting = Meetings.findOne({meetingRoomId: roomId, startTime: {$lt: currentTime},endTime: {$gt: currentTime}});\n\n\t\t\tif (meeting) {\n\t\t\t\tconsole.log(\"------------------------------------\");\n\t\t\t\tconsole.log(\"currentTime \", currentTime.getTime());\n\t\t\t\tconsole.log(\"endTime \", meeting.endTime.getTime());\n\n\t\t\t\tvar currentTimeAfter14min = currentTime.getTime() + (14*60*1000);\n\t\t\t\tvar currentTimeAfter16min = currentTime.getTime() + (16*60*1000);\n\t\t\t\tvar meetingEndTime = meeting.endTime.getTime();\n\n\t\t\t\tif ( (currentTimeAfter14min < meetingEndTime)  && (currentTimeAfter16min > meetingEndTime) ) {\n\t\t\t\t\tconsole.log('Yes it is between 15 min')\n\t\t\t\t\treturn {showNotification: true, stopInterval: true};\n\t\t\t\t} else {\n\t\t\t\t\treturn {showNotification: false, stopInterval: false};\t\t\t\t\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn {};\n\t\t\t}\n\n\t\t} catch (e) {\n\t\t\treturn new Meteor.Error(\"Type-Error\", e);\n\t\t}\n\t},\n\n\temailInvitationToParticipants: function (meetingId) {\n\t\tvar meeting = Meetings.findOne(meetingId);\n    var participants = meeting['roomParticipants'];\n    for (var participant in participants) {\n        console.log(\"participant \",participants[participant]);\n        Email.send({\n          to: participants[participant],\n          from: \"InstaVC Admin<no-reply@instavc.com>\",\n          subject: \"InstaVC Meeting Invitation\",\n          html: \"<html><p>You have been invited to a meeting in InstaVC, which is scheduled on  \"+ meeting['startTime'] + \".</p></html>\"\n        });\n    }\n\t},\n\tdeleteMeeting: function (meetingId) {\n\t\ttry {\n\t\t\tMeetings.remove({_id: meetingId});\n\t\t} catch (error) {\n\t\t\tthrow new Meteor.Error(\"meeting-deleted-failed\", error.message);\n\t\t}\n\t},\n\teditMeeting:function (meetingObj) {\n\t\t//console.log(\"meetingObj:\", meetingObj);\n\n\t\t//get the start,end time,room name from the client\n\t\tvar sT = moment(meetingObj.startTime);\n\t\tvar eT = moment(meetingObj.endTime);\n\t\t//var newRoom = meetingObj.meetingRoom;\n\n\t\t//get that particular meeting slot\n\t\tvar oldMeetingSlot = Meetings.findOne({_id: meetingObj.meetingId});\n\n\t\t//find old and new meeting ids\n\t\tvar oldMeetingSlotId = oldMeetingSlot._id;\n\t\tvar newmeetingSlotId = meetingObj._id;\n\n\t\t//get the old meeting start and end time and room name \n\t\tvar oldStartTime = oldMeetingSlot.startTime ;\n\t\tvar oldEndTime = oldMeetingSlot.endTime;\n\n\t\t//var oldEndTime = moment( oldMeetingSlot.endTime );\n\t\tvar oldRoom = oldMeetingSlot.meetingRoom;\n\n\n\t\n\n\t\t//room not changed\n\t\t// if  (newRoom == oldRoom) {\n\n\n\t\t\tif (  sT.isSame(oldStartTime)  && eT.isSame(oldEndTime)  ) { \n\n\t\t\t\tconsole.log(\"room and timings are not changed\");\n\t\t\t\ttry {\n\t\t\t\t\tMeetings.update({_id: meetingObj.meetingId}, {$set: {\n\t\t\t\t\t\tmeetingName: meetingObj.meetingName,\n\t\t\t\t\t\tmeetingDetails: meetingObj.meetingDetails,\n\t\t\t\t\t\t// startTime: meetingObj.startTime,\n\t\t\t\t\t\t// endTime: meetingObj.endTime,\n\t\t\t\t\t\t// meetingRoom: meetingObj.meetingRoom,\n\t\t\t\t\t\t// meetingRoomId: meetingObj.meetingRoomId,\n\t\t\t\t\t\tmodifiedAt: meetingObj.modifiedAt,\n\t\t\t\t\t\tmodifiedBy: meetingObj.modifiedBy\n\t\t\t\t\t}});\n\t\t\t\t\treturn;\n\t\t\t\t} catch (error) {\n\t\t\t\t\t\tthrow new Meteor.Error(\"meeting-edit-failed\", error.message);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t\t//console.log(\" timings changed\");\n\n\t\t\t\t\tif ( sT.isSame( oldStartTime ) ) {\n\n\t\t\t\t\t\tif ( eT.isBefore(oldEndTime) ) {\n\t\t\t\t\t\t\t//console.log(\"shorten\");\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tMeetings.update({_id: meetingObj.meetingId}, {$set: {\n\t\t\t\t\t\t\t\t\tmeetingName: meetingObj.meetingName,\n\t\t\t\t\t\t\t\t\tmeetingDetails: meetingObj.meetingDetails,\n\t\t\t\t\t\t\t\t\tstartTime: meetingObj.startTime,\n\t\t\t\t\t\t\t\t\tendTime: meetingObj.endTime,\n\t\t\t\t\t\t\t\t\t//meetingRoom: meetingObj.meetingRoom,\n\t\t\t\t\t\t\t\t\tmeetingRoomId: meetingObj.meetingRoomId,\n\t\t\t\t\t\t\t\t\tmodifiedAt: meetingObj.modifiedAt,\n\t\t\t\t\t\t\t\t\tmodifiedBy: meetingObj.modifiedBy\n\t\t\t\t\t\t\t\t}});\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t} catch ( error ) {\n\t\t\t\t\t\t\t\t\tthrow new Meteor.Error(\"meeting-edit-failed\", error.message);\t\t\t\t\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t//console.log(\"extended\");\n\n\t\t\t\t\t\t\t\tvar nextSlot = Meetings.find( \n\t\t\t\t\t\t\t\t{ startTime: \n\t\t\t\t\t\t\t\t\t{ $gte: oldEndTime} \n\t\t\t\t\t\t\t\t}, \n\t\t\t\t\t\t\t\t{ sort: \n\t\t\t\t\t\t\t\t\t{ startTime: 1 },\n\t\t\t\t\t\t\t\t\tlimit: 1 \n\t\t\t\t\t\t\t\t} ).fetch();\n\n\t\t\t\t\t\t\t\tif (nextSlot.length > 0 ) {\n\t\t\t\t\t\t\t\t\tvar nextSlotTime = moment(nextSlot[0][\"startTime\"]);\n\n\t\t\t\t\t\t\t\t\tif( eT.isAfter(nextSlotTime) ){\n\t\t\t\t\t\t\t\t\t\t//console.log(\"saale aukad me reh\");\n\t\t\t\t\t\t\t\t\t\tthrow new Meteor.Error(\"meeting-edit-failed\", \"The meeeting end time collides with the next meeting start time\");\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\t\t\t//console.log(\"slot khali tha insert kar li\");\n\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\tMeetings.update({_id: meetingObj.meetingId}, {$set: {\n\t\t\t\t\t\t\t\t\t\t\tmeetingName: meetingObj.meetingName,\n\t\t\t\t\t\t\t\t\t\t\tmeetingDetails: meetingObj.meetingDetails,\n\t\t\t\t\t\t\t\t\t\t\tstartTime: meetingObj.startTime,\n\t\t\t\t\t\t\t\t\t\t\tendTime: meetingObj.endTime,\n\t\t\t\t\t\t\t\t\t\t\t//meetingRoom: meetingObj.meetingRoom,\n\t\t\t\t\t\t\t\t\t\t\tmeetingRoomId: meetingObj.meetingRoomId,\n\t\t\t\t\t\t\t\t\t\t\tmodifiedAt: meetingObj.modifiedAt,\n\t\t\t\t\t\t\t\t\t\t\tmodifiedBy: meetingObj.modifiedBy\n\t\t\t\t\t\t\t\t\t\t}});\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t} catch ( error ) {\n\t\t\t\t\t\t\t\t\t\t\tthrow new Meteor.Error(\"meeting-edit-failed\", error.message);\t\t\t\t\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\t\n\t\t\t\t\t\t\t} \n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\t//console.log(\"preponed\");\n\n\t\t\t\t\t\t\tif ( sT.isAfter( moment( oldStartTime ) ) ) {\n\t\t\t\t\t\t\t\t//console.log(\"you are shortening ur time\");\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\tMeetings.update({_id: meetingObj.meetingId}, {$set: {\n\t\t\t\t\t\t\t\t\t\t\tmeetingName: meetingObj.meetingName,\n\t\t\t\t\t\t\t\t\t\t\tmeetingDetails: meetingObj.meetingDetails,\n\t\t\t\t\t\t\t\t\t\t\tstartTime: meetingObj.startTime,\n\t\t\t\t\t\t\t\t\t\t\tendTime: meetingObj.endTime,\n\t\t\t\t\t\t\t\t\t\t\t//meetingRoom: meetingObj.meetingRoom,\n\t\t\t\t\t\t\t\t\t\t\tmeetingRoomId: meetingObj.meetingRoomId,\n\t\t\t\t\t\t\t\t\t\t\tmodifiedAt: meetingObj.modifiedAt,\n\t\t\t\t\t\t\t\t\t\t\tmodifiedBy: meetingObj.modifiedBy\n\t\t\t\t\t\t\t\t\t\t}});\n\t\t\t\t\t\t\t\t\t} catch ( error ) {\n\t\t\t\t\t\t\t\t\t\t\tthrow new Meteor.Error(\"meeting-edit-failed\", error.message);\t\t\t\t\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}else {\n\n\t\t\t\t\t\t\t\t\tvar prevSlot = Meetings.find( \n\t\t\t\t\t\t\t\t\t\t{ endTime: \n\t\t\t\t\t\t\t\t\t\t\t{ $lte: oldStartTime} \n\t\t\t\t\t\t\t\t\t\t}, \n\t\t\t\t\t\t\t\t\t\t{ sort: \n\t\t\t\t\t\t\t\t\t\t\t{ endTime: -1 },\n\t\t\t\t\t\t\t\t\t\t\tlimit: 1 \n\t\t\t\t\t\t\t\t\t\t} ).fetch();\n\n\t\t\t\t\t\t\t\t\t//console.log(prevSlot);\n\n\t\t\t\t\t\t\t\t\tif ( prevSlot.length > 0) {\n\t\t\t\t\t\t\t\t\t\t//console.log(\"prev\", prevSlot[0][\"endTime\"]);\n\t\t\t\t\t\t\t\t\t\tvar prevSlotEndTime = prevSlot[0][\"endTime\"];\n\n\t\t\t\t\t\t\t\t\t if( sT.isBefore(prevSlotEndTime) ) {\n\t\t\t\t\t\t\t\t\t\tthrow new Meteor.Error(\"meeting-edit-failed\", \"The meeting start time collides with the end time of of previous meeting\");\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\t\t\t\t//console.log(\"prev slot is empty\");\n\t\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\t\tMeetings.update({_id: meetingObj.meetingId}, {$set: {\n\t\t\t\t\t\t\t\t\t\t\t\tmeetingName: meetingObj.meetingName,\n\t\t\t\t\t\t\t\t\t\t\t\tmeetingDetails: meetingObj.meetingDetails,\n\t\t\t\t\t\t\t\t\t\t\t\tstartTime: meetingObj.startTime,\n\t\t\t\t\t\t\t\t\t\t\t\tendTime: meetingObj.endTime,\n\t\t\t\t\t\t\t\t\t\t\t\t//meetingRoom: meetingObj.meetingRoom,\n\t\t\t\t\t\t\t\t\t\t\t\tmeetingRoomId: meetingObj.meetingRoomId,\n\t\t\t\t\t\t\t\t\t\t\t\tmodifiedAt: meetingObj.modifiedAt,\n\t\t\t\t\t\t\t\t\t\t\t\tmodifiedBy: meetingObj.modifiedBy\n\t\t\t\t\t\t\t\t\t\t\t}});\n\t\t\t\t\t\t\t\t\t\t}catch ( error ) {\n\t\t\t\t\t\t\t\t\t\t\tthrow new Meteor.Error(\"meeting-edit-failed\", error.message);\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t \t\t}\t\n\t\t// } else {\n\t\t// \t\tconsole.log(\"room changed\");\n\t\t// \t\tvar roomCursor = Meetings.find({meetingRoom: meetingObj.meetingRoom});\n\n\t\t// \t\tvar sT = moment(meetingObj.startTime);\n\t\t// \t\tvar eT = moment(meetingObj.endTime);\n\t\t\t\n\t\t// \t\t//check if room has bookings\n\t\t// \t\tif (roomCursor.count() !== 0) {\n\t\t// \t\t\troomCursor.forEach( function (room) {\n\t\t\t\t\t\t\n\t\t// \t\t\t\tvar rsT = moment(room.startTime);\n\t\t// \t\t\t\tvar reT = moment(room.endTime);\n\n\t\t// \t\t\t\tif ( sT.isSame(rsT) ) {\n\t\n\t\t// \t\t\t throw new Meteor.Error(\"meeting room start time is same as pre booked slot\", \"select another slot or another room\");\n\t\t\t\t\t\n\t\t// \t\t\t} else if  ( sT.isAfter(rsT) && eT.isBefore(reT) ) {\n\t\t\t\t\t\t\n\t\t// \t\t\t\tthrow new Meteor.Error(\"meeting slot is in between pre booked slot\", \"select another slot or another room\");\n\t\t\t\t\t\n\t\t// \t\t\t} else if ( sT.isAfter(rsT) && sT.isBefore(reT) ) {\n\t\t\t\t\t\n\t\t// \t\t\t\tthrow new Meteor.Error(\"meeting start time is in between pre booked slot\", \"select another slot or another room\");\n\t\t// \t\t\t} else if ( eT.isAfter(rsT) && eT.isBefore(reT) ) {\n\t\t\t\t\t\t\n\t\t// \t\t\t\tthrow new Meteor.Error(\"meeting end  time is in between pre booked slot\", \"select another slot or another room\");\n\t\t// \t\t\t} else if ( sT.isBefore(rsT) && ( eT.isAfter(reT) || eT.isAfter(rsT) ) ) {\n\n\t\t// \t\t\t\tthrow new Meteor.Error(\"meeting end time conflict\", \"select another slot or another room\");\n\t\t// \t\t\t}\n\t\t// \t\t\t});\t\t\n\t\t// \t\t\ttry {\n\t\t// \t\t\t\tconsole.log(\"no conflicts\");\n\t\t// \t\t\t\tMeetings.insert(meetingObj);\n\t\t// \t\t\t} catch (error) {\n\t\t// \t\t\t\tthrow new Meteor.Error(\"meeting-create failed\", \"failed to insert new meeting\");\n\t\t// \t\t\t}\n\t\t// \t\t} else {\n\t\t// \t\t\tconsole.log(\"empty room\");\n\t\t// \t\t\tMeetings.insert(meetingObj);\n\t\t// \t\t}\n\t\t// \t}\n\t\t}\n});\n\n\n\n\n","Meteor.methods({\n\t//this function returns the role of the user\n\tgetUserRole: function () {\n\t\ttry {\n\t\t\treturn Meteor.users.findOne(this.userId).role;\n\t\t} catch (e) {\n\t\t\treturn \"notExisting\";\n\t\t}\n\t},\n\n\ttoggleTabBar: function(){\n\t\tif(this.userId){\n\t\t\treturn true;\n\t\t}\n\t}\n});","//Publish SMTP settings to the client\n// If login user is Super Admin\nMeteor.publish('smtpSettings', function () {\n\tif (this.userId && Meteor.users.findOne(this.userId).role == \"SA\") {\n\t\tvar smtpSettings = ApplicationSettings.findOne().smtpSettings;\n\n\t\tif (smtpSettings)\treturn ApplicationSettings.find({}, {\tfields: {\t'smtpSettings': 1\t}\t});\n\t\telse return ApplicationSettings.find({});\n\n\t} else {\n\t\tthis.stop();\n\t\treturn null;\n\t}\n});\n\n//Publish LDAP settings to the client\n// If login user is Super Admin\nMeteor.publish('ldapSettings', function () {\n\tif (this.userId && Meteor.users.findOne(this.userId).role == \"SA\") {\n\t\tvar ldapSettings = ApplicationSettings.findOne().ldapSettings;\n\t\tif (ldapSettings)\t{\n\t\t\treturn ApplicationSettings.find({}, {\tfields: {\t'ldapSettings': 1\t}\t});\n\t\t}\n\t\telse\t{\n\t\t\treturn ApplicationSettings.find({});\n\t\t}\n\t} else {\n\t\tthis.stop();\n\t\treturn null;\n\t}\n});\n\n//Publish whitelabel settings to the client if the client is super admin\nMeteor.publish(\"whitelabelSettings\", function () {\n\tif ( (! this.userId ) || ( Meteor.users.findOne( this.userId ).role !== \"SA\" ) ) {\n\t\tthis.stop();\n\t\tthrow new Meteor.Error(\"no-permission\", \"Cant publish--no rights\");\n\t} else {\n\t\tvar id;\n\n\t\ttry {\n\t\t\tid = ApplicationSettings.findOne().whiteLabelSettings;\n\t\t}catch(error) {\n\t\t\tthrow new Meteor.Error(error.sanitizedError.Error, error.sanitizedError.message);\n\t\t\treturn [];\n\t\t}\n\n\t\ttry {\n\t\t\tif (id) {\n\t\t\t\treturn ApplicationSettings.find( {}, { fields: {\"whiteLabelSettings\": 1} } );\n\t\t\t} else {\n\t\t\t\t\treturn null;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tthrow new Meteor.Error(\"publish-fail\", \"Failed to publish whiteLabelSettings\");\n\t\t}\n\t}\n});\n\n//publish details of the particular user to the super admin minus the password of the user\nMeteor.publish(\"userDetails\", function (userId) {\n\tif (this.userId && Meteor.users.findOne(this.userId).role == \"SA\") {\n\t\treturn Meteor.users.find({_id: userId}, {fields: {\"services.password\": 0}});\n\t} else {\n\t\tthis.stop();\n\t\treturn null;\n\t}\n});\n\n//publish details of all users but only id, profile name and username in the result set(needs super admin rights)\nMeteor.publish(\"allUsers\", function () {\n\tif (this.userId && Meteor.users.findOne(this.userId).role == \"SA\") {\n\t\t// if (this.userId\t) {\t\n\t\t// return Meteor.users.find({}, {fields: {\"services.password\": 0, role: 0, }});\n\t\treturn Meteor.users.find({}, {fields: {\"_id\": 1, \"profile.name\": 1, \"username\": 1}});\t\n\t} else {\n\t\tthis.stop();\n\t\treturn null;\n\t}\n});\n\n//publish room license of the particular room if the room exists \nMeteor.publish(\"roomLicenses\", function(roomId) {\n\tif (this.userId && Meteor.users.findOne(this.userId).role == \"SA\" && RoomLicense.findOne(roomId)) {\n\t\tconsole.log('RoomLicense publish');\n\t\treturn RoomLicense.find({_id: roomId});\n\t} else {\n\t\tthis.stop();\n\t\treturn null;\n\t}\n});\n\n//Publish the role of the user.\nMeteor.publish(\"currentUser\", function () {\n\tif (this.userId) {\n\t\treturn Meteor.users.find({_id: this.userId}, {fields: {\"role\": 1}});\n\t} else {\n\t\treturn [];\t\n\t}\n});\n\n\n//publish the meetings in a room.\n// All meetings related to user by room.\nMeteor.publish(\"meetings\", function () {\n\tif (!this.userId) {\n\t\tthis.stop();\n\t\treturn null; \n\t} else {\n\t\tvar roomIds = [];\n\t \tvar rooms = RoomLicense.find({'users.uid': this.userId},{fields: {\"roomPassword\": 0, \"hostPassword\": 0}});\n\t \trooms.forEach(function(room){\n\t \t\troomIds.push(room._id);\n\t \t});\n\t\tvar meetings = Meetings.find( { meetingRoomId: { $in: roomIds } } );\n\t\treturn meetings; \n\t}\n});\n\n//publish room license\nMeteor.publish(\"MyRooms\", function() {\n\tif(!this.userId){\n\t\tthis.stop();\n\t\treturn null;\n\t} else {\n\t\treturn RoomLicense.find({'users.uid': this.userId},{fields: {\"roomPassword\": 0, \"hostPassword\": 0}});\n\t}\n});\n\n\n//Publish Room based on RooomLicense\nMeteor.publish(\"MyRoom\", function(roomlicense) {\n\tif(!this.userId){\n\t\tthis.stop();\n\t\treturn null;\n\t}else{\n\t\treturn RoomLicense.find({roomLicense: roomlicense},{fields: {\"roomPassword\": 0, \"hostPassword\": 0}});\n\t}\n});\n\n// //Publish Room based on _id\n// Meteor.publish(\"RoomBasedOnRoomId\", function(roomId) {\n// if(!this.userId){\n// return null;\n// }else{\n// return RoomLicense.find({_id: roomId},{fields: {\"roomPassword\": 0, \"hostPassword\": 0}});\n// }\n// });\n\n//publish all details of the logged in user except role and password\nMeteor.publish(\"getCurrentUserWithContacts\", function () {\n\tif (!this.userId) {\n\t\tthis.stop();\n\t\treturn null;\n\t}else{\n\t\treturn Meteor.users.find({_id: this.userId}, {fields: {\"role\": 0, \"services\": 0}});\n\t}\n});\n\n//publish  the profile name and the image of the contact\nMeteor.publish(\"Contacts\", function () {\n\tif (this.userId) {\n\t\tvar contactsList = Meteor.users.findOne({_id: this.userId})['contacts'];\n\t\tif (contactsList) {\n\t\t\tvar contactIds = contactsList.map(function (contactObj) { return contactObj.uid});\n\t\t\treturn Meteor.users.find({_id: {$in: contactIds} }, {fields: { 'profile.name': 1, /*'profile.profileImage': 1,*/ 'presence': 1}});\n\t\t} else return [];\n\t} else {\n\t\tthis.stop();\n\t\treturn null;\n\t}\n});\n\n//publish messages from a particular date from a particular chat\nMeteor.publish('Messages', function (chatRoomId, fromDate) {\n\tconsole.log(\"chatRoomId and fromDate \", chatRoomId, fromDate);\n\tif (this.userId && chatRoomId) {\n\t\ttry {\n\t\t// return Messages.find({chatRoomId: chatRoomId, chatDate: {$gte: fromDate}}, {sort: {chatDate: 1}});\n\t\t\treturn Messages.find({chatRoomId: chatRoomId, chatDate: {$gte: fromDate}});\n\t\t} catch (e) { console.log(\"didn't find chatRoomId \",e);}\n\t} else {\n\t\tthis.stop();\n\t\treturn null;\n\t}\n});\n\nMeteor.publish(\"emailSearch\", function(query) {\n\tcheck(query, String);\n\tif(_.isEmpty(query)) return this.ready();\n\t//console.log(\"res:\", Meteor.users.find({\"emails.address\": {$regex: query, $options: \"$i\"}}).count());\n\t// return Meteor.users.find({\"emails.address\": {$regex: query, $options: \"$i\"} });\n\n\treturn Meteor.users.find({  $or: [ { \"emails.address\": {$regex: query, $options: \"$i\"} },\n\t{ \"username\": {$regex: query, $options: \"$i\"}   } ]  });\n});\n\nMeteor.publish('getContactProfileName', function (uid) {\n\treturn Meteor.users.find({_id: uid}, {fields: {'profile.name': 1}});\n});\n\nMeteor.publish(\"roomParticipants\", function (roomParticipants) {\n\tif (! this.userId) {\n\t\tthis.stop();\n\t\treturn null;\n\t}\n\tcheck(roomParticipants, Array);\n\ttry {\n\t\treturn Meteor.users.find( { _id: { $in: roomParticipants } }, { fields: { \"profile.name\": 1, \"emails\": 1 } } );\n\t} catch (error) {\n\t\tthis.stop();\n\t\treturn null;\t\t\n\t}\n});\n\nMeteor.publish(\"corporateDetail\", function(cid){\n\tif(! this.userId){\n\t\tthis.stop();\n\t\treturn null;\n\t}else{\n\t\treturn Corporate.find({_id: cid});\n\t}\n});\n\n\n/* CR-IVC5-0001844 Contacts publisher for iOS clients - DSS>> */\nMeteor.publish(\"iOSContacts\", function () {\n    if (this.userId) {\n        var contactsList = Meteor.users.findOne({_id: this.userId})['contacts'];\n        // console.log(contactsList);\n        if (contactsList) {\n            var contactIds = contactsList.map(function (contactObj) { return contactObj.uid});\n            var chatRoomIds = contactsList.map(function (contactObj) { return contactObj.chatRoom});\n            //console.log(contactIds);\n            //console.log(chatRoomIds);\n            // console.log(Meteor.users.find({_id: 'BAdjPhuzxh5EnkktT' }));\n            return Meteor.users.find({_id: {$in: contactIds}},//{$in: contactIds} }, \n                {fields:{\n                        contacts: { $elemMatch: {\n                            uid: this.userId\n                        }\n                    },\n                // }});\n            'username':1,'profile.name':1,'presence':1}});\n        } else return [];\n    } else {\n        this.stop();\n        return null;\n    }\n});\n\n\n/*Messages publisher for iOS clients*/\nMeteor.publish('iOSMessages', function (chatRoomID) {\n    //console.log(\"chatRoomId \", chatRoomID);\n    if (this.userId && chatRoomID) {\n        try {\n        // return Messages.find({chatRoomId: chatRoomId, chatDate: {$gte: fromDate}}, {sort: {chatDate: 1}});\n            // console.log(Messages.find({chatRoomId: 'gW8WzrtFyfzk7cvJn'},{sort: {chatDate:1}}).fetch());\n            return Messages.find({chatRoomId: chatRoomID}, {sort: {chatDate:-1}});//dateForUI: {$gte: new Date(fromDate)}});//, chatDate: {$gte: fromDate}});\n        } catch (e) { console.log(\"didn't find chatRoomId \",e);}\n    } else {\n        this.stop();\n        return null;\n    }\n});\n/* CR-IVC5-0001844 - DSS<< */\n","Meteor.startup(function () {\n\t// This code will disable the Accounts.createUser() from client side.\n\tAccounts.config({\n\t\tforbidClientAccountCreation: true\n\t});\n\n\t// Stop the user to update his profile from client (browser)\n\tMeteor.users.deny({  \n\t  update: function() {\n\t    return true;\n\t  }\n\t});\n});\n\nMeteor.methods({\n\tupdateUserStatusToOffline: function(){\n\t\tMeteor.users.update({_id: this.userId}, {$set: {presence: 0}});\n\t}\n});\n\nAccounts.onLogin(function(info) {\n\ttry {\n\t\tif (info.type == \"ldap\") {\n\t\t\tconsole.log(\" ------------------ User Login with LDAP ------------------------ \");\n\t\t\tconsole.log(info);\n\t\t\tvar userId = info.user._id;\n\t\t\tvar profile = { name: info.user.displayName, userType: \"ldap\", createdBy: \"ldap\" };\n\t\t\tvar emails = [ {address: info.user.username, verified: false} ];\n\t\t\n\t\t\tvar groupName = info.user['memberOf'];\n\t\t\tvar role = \"US\";\n\t\t\t// console.log(\"groupName  \", groupName);\n\t\t\t// console.log(\"groupName[0]  \", groupName[0]);\n\t\t\tif (groupName && groupName[0] == \"InstaVCAdmin\") {\n\t\t\t\trole = \"SA\";\n\t\t\t} else {\n\t\t\t\trole = \"US\";\n\t\t\t}\n\n\t\t\tMeteor.users.update({_id: userId}, {$set: {\"role\" : role, profile: profile, emails: emails}});\n\t\t}\n\n\t\tMeteor.users.update(Meteor.userId(), {$set: {connection_id: info.connection.id, presence: 1}});\t\t\n\t} catch (e) {\n\t\tconsole.log(e);\n\t}\n});\n\n\nMeteor.onConnection( function( connection ) {\n\tconnection.onClose( function() {\n\t\tMeteor.users.update({connection_id: connection.id}, {$set: {presence: 0}});\n\t});\n});","Meteor.startup( function () {\n\t// Configure the LDAP settings if exists in the database.\n\tsetLDAP();\n\n\t// Configure the SMTP settings if exists in the database.\n\tsetMAIL_URL();\n\t\n\t//Configure the whitelabel settings\n\tsetDefaultWhiteLabelSettings();\n\n\t// Update MAIL_URL & LDAP_settings if any changes happens to the ApplicationSettings.\n\tApplicationSettings.find().observeChanges({\n\t\tadded: function () {\n\t\t\tsetMAIL_URL();\n\t  \tsetLDAP();\t\t\t\n\t\t},\n\t\tchanged: function() {\n\t\t\tsetMAIL_URL();\n\t  \tsetLDAP();\t\t\n\t\t},\n\t\tremoved: function () {\n\t\t\tsetMAIL_URL();\n\t  \tsetLDAP();\t\t\t\n\t\t}\n\t});\n});\n\n\n","Accounts.emailTemplates.from = \"InstaVC Admin<no-reply@instavc.com>\";\t// the sender of the mail\n\n// subject of the reset password mail\nAccounts.emailTemplates.resetPassword.subject = function (user) {\n  return \" Password Reset for InstaVC.com\";\n};\n\n// body of the email sent to user for resetting password\nAccounts.emailTemplates.resetPassword.text = function (user, url) {\n  var token = url.substring( url.lastIndexOf('/') + 1, url.length );\n  var newURL = Meteor.absoluteUrl('reset-password/' + token);\n  \n  return \"Hello \"+user.profile.name+\" Click on the following link to reset your password \\n\\n\" + newURL;\n};\n\n\n//body of the welcome email sent to user upon creation of user account\nAccounts.emailTemplates.enrollAccount.text = function (user, url) {\n\tvar token = url.substring( url.lastIndexOf('/') + 1, url.length );\n\tvar newURL = Meteor.absoluteUrl('enroll-account/' + token);\n\t\n\treturn \"Hello \" + user.profile.name + \"\\n\\n\" +\n  \"Please click on the link below to set your password and start using the service\\n\\n\" + newURL;\n};","//MCU_URL \t= \"https://mcu-ind4.instavc.com/\";\n\nMCU_URL \t= \"https://mcu.instavc.com/\";\n","Meteor.startup(function () {\n\t// Add default admin user to the application.\n\tvar superAdmin = Accounts.findUserByUsername('superadmin@instavc.com');\n\tif(! superAdmin){\n\t\tvar superAdmin = Accounts.createUser({\n\t\t\tusername: 'superadmin@instavc.com',\n\t\t\tpassword: 'Ajarsun123#2015',\n\t\t\temail: 'superadmin@instavc.com',\n\t\t\tprofile: {\n\t\t\t\tname: 'Insta SuperAdmin'\n\t\t\t}\n\t\t});\n\t\tMeteor.users.update(superAdmin, {$set: {role: \"SA\"}});\n\t}\n\n\t// Add default guest user to the application\n\tvar guestUser = Accounts.findUserByUsername('guest@instavc.com');\n\tif (! guestUser) {\n\t\tvar guestUser = Accounts.createUser({\n\t\t\tusername: 'guest@instavc.com',\n\t\t\tpassword: 'Ajarsun123',\n\t\t\temail: 'guest@instavc.com',\n\t\t\tprofile: {\n\t\t\t\tname: 'Insta Guest User'\n\t\t\t}\n\t\t});\n\n\t\tMeteor.users.update(guestUser, {$set: {role: \"GU\"}});\n\t}\n\n// Insert Default values into the ApplicationSettings Collection\n\tvar applicationSettingsId = ApplicationSettings.findOne();\n\tif (applicationSettingsId == undefined) ApplicationSettings.insert({});\n});\n\n\n// // only for testig purpose--donot deploy this code or push into master\n// Meteor.methods({\n// \taddUserToApplication: function (email, password, profileName, role) {\n// \t\ttry {\n// \t\t\tfor (var i = 5; i<=5; i++) {\n// \t\t\t\tvar superAdmin = Accounts.createUser({\n// \t\t\t\t\tusername: \"madhu\"+i+\"@kmail.com\",\n// \t\t\t\t\tpassword: \"admin123\",\n// \t\t\t\t\temail: \"madhu\"+i+\"@gmail.com\",\n// \t\t\t\t\tprofile: {\n// \t\t\t\t\t\tname: \"madhu\"+i\n// \t\t\t\t\t}\n// \t\t\t\t});\n// \t\t\t\tconsole.log( \" superadmin \", superAdmin);\n// \t\t\t\tMeteor.users.update(superAdmin, {$set: {role: \"US\"}});\n// \t\t\t}\n// \t\t} catch (e) { console.log(e);}\n// \t}\n// });","Meteor.startup(function () {\n  UploadServer.init({\n    directoryType: '',\n    tmpDir: process.env.PWD + '/upload/tmp',\n    uploadDir: process.env.PWD + '/upload',\n    acceptFileTypes: /^[^.]+$|\\.(?!(html|exe)$)([^.]+$)/,\n    checkCreateDirectories: true, //create the directories for you\n    getFileName: function(fileInfo, formData) {\n      return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1) + formData.sentBy +fileInfo.name;\n    },\n    finished: function(fileInfo, formFields) {\n      if (Number(formFields.fileFromGroupChat)) {\n        fileInfo.fileFromGroupChat = true;\n      } else {\n        fileInfo.fileFromGroupChat = false;\n        var messageDoc = Messages.findOne({chatRoomId: formFields.chatRoom, chatDate: Number(formFields.UTCDateNumber)});\n        var baseUrl = fileInfo.baseUrl;\n        var messageObj = {\n          message: '',\n          type: fileInfo.type,\n          url: 'upload'+fileInfo.path,\n          sentBy: formFields.sentBy,\n          sentAt: new Date(formFields.sentAt)\n        };\n        if (messageDoc) {\n          Messages.update({_id: messageDoc._id}, {$push: {messages: messageObj}});\n        } else {\n          Messages.insert({chatRoomId: formFields.chatRoom, chatDate: Number(formFields.UTCDateNumber), messages: [messageObj]});\n        }\n      }\n    }\n  });\n});"]}