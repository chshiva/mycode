# BASE-IO
> Добавление в прототип из файлов, наследование, EventEmitter, создание "цепочек"

Позволяет легко создавать структуры модуля разделяя его по файлам и не только

[![NPM version](https://img.shields.io/npm/v/base-io.svg)](https://www.npmjs.com/package/base-io)
[![NPM downloads](https://img.shields.io/npm/dt/base-io.svg)](https://www.npmjs.com/package/base-io)

## Инициализация / Начало работы
### Установка модуля
```shell
npm install base-io --save
```

### Инициализация одного экземпляра
```javascript
'use strict';

const base = new (require('base-io'));
```

### Импорт конструктора для расширения
```javascript
base.import(function(){...});

/* Или */

base.import(class Example {
	constructor () {...}
});
```

### Экспорт готового конструктора
```javascript
base.export(); // -> object
```

### Наследование объектов
Наследует все свойства объекта
```javascript
base.extend({...});
```
Наследовать EventEmitter
```javascript
base.emitter();
```

### Наследование из файлов
#### Установка пути поиска
Установка пути для поиска директорий, необходимо для `.scan()`

Не обязательно из текущий директории
```javascript
base.root(__dirname);
```

#### Директории с расширением прототипа
Необходимо передать название директории с файлами

Подгружает файлы с расширением .js вытаскивая из них объекты

Принимает `string` или `array`
```javascript
base.scan([
	'primary',
	'middleware'
]);

/* Или */

base.scan('primary');
base.scan('middleware');
```
Структура папок для примера выше
```
- module
	+ primary
	+ middleware
```

Пример файлов в любой из этих папок

Контекст выполнения что и в основном классе
```javascript
/* primary/random.js */
exports.getRandom = function(){
	return Math.random();
}

/* primary/time.js */
exports.getTimestamp = function(){
	return Date.now();
};

/* middleware/test.js */
exports.test = function(){
	console.log(this.getTimestamp(),this.getRandom());
};
```

### Создание "цепочек"
Установка специального метода для создания цепочки c привязкой контекста `_properties`
```javascript
base.change();
```
Пример дальнейшего использования
```javascript
/* module/index.js */
'use strict';

const base = new (require('base-io'));

base
.import(function(){
	this.name = 'Example';
	this.version = 1;

	this._properties('foo',this.chain);
})
.root(__dirname)
.scan('main')
.change();

module.exports = base.export();

/* module/main/chain.js */
'use strict';

exports.chain = [];

const add = (way,handler) => {
	exports.chain.push({
		way: way,
		handler: handler
	});
};

add('baz',function(){
	console.log(this.name);
});

add('bar.quux',function(){
	console.log(this.version);
});

/* app.js */
'use strict';

var chain = new (require('./module'));

chain.foo.baz();
// Console: Example

chain.foo.bar.quux();
// Console: 1
```
Структура директорий примера:
```
- module
	- main
		chain.js
	index.js
app.js
```
